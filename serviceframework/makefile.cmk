


Include( $(CASUAL_BUILD_ENVIRONMENT))


INCLUDE_PATHS= include \
    ../common/include \
    $(YAML_INCLUDE_PATH) \
	$(UNITTEST_INCLUDE_PATH) \

LIBRARY_PATHS= $(YAML_LIBRARY_PATH)


Compile( source/archive_base.cpp, obj/archive_base.o)
Compile( source/force_instantiation.cpp, obj/force_instantiation.o)

LinkLibrary( casual_sf,\
    obj/archive_base.o \
    obj/force_instantiation.o,\
    yaml-cpp)



//
// unittest
//
Compile( unittest/isolated/source/test_namevaluepair.cpp, unittest/isolated/obj/test_namevaluepair.o)
Compile( unittest/isolated/source/test_archive.cpp, unittest/isolated/obj/test_archive.o)
Compile( unittest/isolated/source/test_traits.cpp, unittest/isolated/obj/test_traits.o)
Compile( unittest/isolated/source/test_yaml_archive.cpp, unittest/isolated/obj/test_yaml_archive.o)


LinkIsolatedUnittest( casual_sf_isolated, \
	unittest/isolated/obj/test_namevaluepair.o \
	unittest/isolated/obj/test_archive.o \
	unittest/isolated/obj/test_traits.o \
	unittest/isolated/obj/test_yaml_archive.o, \
	casual_sf)
	
