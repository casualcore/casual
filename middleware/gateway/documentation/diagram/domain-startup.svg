<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1826px" preserveAspectRatio="none" style="width:2195px;height:1826px;" version="1.1" viewBox="0 0 2195 1826" width="2195px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n1lscafcutnp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="1034" y="22.9951">gateway startup</text><rect fill="#ADD8E6" height="1780.7656" style="stroke: #A80036; stroke-width: 1.0;" width="939" x="19" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="453.5" y="46.3638">domain A</text><rect fill="#DDDDDD" height="1780.7656" style="stroke: #A80036; stroke-width: 1.0;" width="1017.5" x="1160.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="1634.25" y="46.3638">domain B</text><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="436.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="138" y="191.8594"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="429" y="220.9922"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="542.5" y="366.6563"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="180.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="660" y="512.3203"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="538.0898" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906" y="1152.9766"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1197" y="1182.1094"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="95.9648" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1197" y="1253.8086"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="188.4961" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1197" y="1460.8711"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="755.8867" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1565" y="935.1797"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="123.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1570" y="1088.8438"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1736" y="789.5156"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1856" y="1561.9688"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="291.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2049" y="760.3828"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="554.5234" style="stroke: #000000; stroke-width: 2.0;" width="1019" x="13" y="153.7266"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="989.5156" style="stroke: #000000; stroke-width: 2.0;" width="1923" x="261" y="722.25"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="44" x2="44" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="143" x2="143" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="434" x2="434" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="547" x2="547" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="665" x2="665" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="911" x2="911" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1201.5" x2="1201.5" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1570" x2="1570" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1741" x2="1741" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1861" x2="1861" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2054" x2="2054" y1="136.7266" y2="1728.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2152" x2="2152" y1="136.7266" y2="1728.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="23" y="133.4248">client</text><ellipse cx="44.5" cy="63.4297" fill="#FEFECE" filter="url(#f1n1lscafcutnp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44.5,71.4297 L44.5,98.4297 M31.5,79.4297 L57.5,79.4297 M44.5,98.4297 L31.5,113.4297 M44.5,98.4297 L57.5,113.4297 " fill="#FEFECE" filter="url(#f1n1lscafcutnp)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="23" y="1740.7607">client</text><ellipse cx="44.5" cy="1754.0625" fill="#FEFECE" filter="url(#f1n1lscafcutnp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44.5,1762.0625 L44.5,1789.0625 M31.5,1770.0625 L57.5,1770.0625 M44.5,1789.0625 L31.5,1804.0625 M44.5,1789.0625 L57.5,1804.0625 " fill="#FEFECE" filter="url(#f1n1lscafcutnp)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="76" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="83" y="121.4248">domain manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="76" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="83" y="1747.7607">domain manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="368" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="375" y="121.4248">service manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="368" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="375" y="1747.7607">service manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="510" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="517" y="121.4248">Server A</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="510" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="517" y="1747.7607">Server A</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="595" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="602" y="121.4248">gateway manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="595" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="602" y="1747.7607">gateway manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="868" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="875" y="121.4248">outbound</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="868" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="875" y="1747.7607">outbound</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="1164.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1171.5" y="121.4248">inbound</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="1164.5" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1171.5" y="1747.7607">inbound</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="1500" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="1507" y="121.4248">gateway manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="1500" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="1507" y="1747.7607">gateway manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="1703" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="1710" y="121.4248">Server B</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="1703" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="1710" y="1747.7607">Server B</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="1795" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1802" y="121.4248">service manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="1795" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1802" y="1747.7607">service manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1987" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1994" y="121.4248">domain manager</text><rect fill="#FEFECE" filter="url(#f1n1lscafcutnp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1987" y="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1994" y="1747.7607">domain manager</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="2131" y="133.4248">client</text><ellipse cx="2152.5" cy="63.4297" fill="#FEFECE" filter="url(#f1n1lscafcutnp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2152.5,71.4297 L2152.5,98.4297 M2139.5,79.4297 L2165.5,79.4297 M2152.5,98.4297 L2139.5,113.4297 M2152.5,98.4297 L2165.5,113.4297 " fill="#FEFECE" filter="url(#f1n1lscafcutnp)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="2131" y="1740.7607">client</text><ellipse cx="2152.5" cy="1754.0625" fill="#FEFECE" filter="url(#f1n1lscafcutnp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2152.5,1762.0625 L2152.5,1789.0625 M2139.5,1770.0625 L2165.5,1770.0625 M2152.5,1789.0625 L2139.5,1804.0625 M2152.5,1789.0625 L2165.5,1804.0625 " fill="#FEFECE" filter="url(#f1n1lscafcutnp)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="436.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="138" y="191.8594"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="429" y="220.9922"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="542.5" y="366.6563"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="180.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="660" y="512.3203"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="538.0898" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906" y="1152.9766"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1197" y="1182.1094"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="95.9648" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1197" y="1253.8086"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="188.4961" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1197" y="1460.8711"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="755.8867" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1565" y="935.1797"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="123.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1570" y="1088.8438"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1736" y="789.5156"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1856" y="1561.9688"/><rect fill="#FFFFFF" filter="url(#f1n1lscafcutnp)" height="291.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2049" y="760.3828"/><rect fill="none" height="554.5234" style="stroke: #000000; stroke-width: 2.0;" width="1019" x="13" y="153.7266"/><polygon fill="#EEEEEE" points="13,153.7266,112,153.7266,112,160.7266,102,170.7266,13,170.7266,13,153.7266" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="28" y="166.7935">startup</text><polygon fill="#A80036" points="126,187.8594,136,191.8594,126,195.8594,130,191.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44.5" x2="132" y1="191.8594" y2="191.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="51.5" y="186.9263">boot</text><polygon fill="#A80036" points="417,216.9922,427,220.9922,417,224.9922,421,220.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="423" y1="220.9922" y2="220.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="155" y="216.0591">spawn service manager</text><polygon fill="#A80036" points="159,246.125,149,250.125,159,254.125,155,250.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="153" x2="428" y1="250.125" y2="250.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="165" y="245.1919">Type::domain_process_connect_request</text><polygon fill="#A80036" points="417,275.2578,427,279.2578,417,283.2578,421,279.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="423" y1="279.2578" y2="279.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="155" y="274.3247">Type::domain_process_connect_reply</text><polygon fill="#A80036" points="159,304.3906,149,308.3906,159,312.3906,155,308.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="153" x2="428" y1="308.3906" y2="308.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="165" y="303.4575">Type::domain_configuration_request</text><polygon fill="#A80036" points="422,333.5234,432,337.5234,422,341.5234,426,337.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="428" y1="337.5234" y2="337.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="155" y="332.5903">Type::domain_configuration_reply</text><polygon fill="#A80036" points="530.5,362.6563,540.5,366.6563,530.5,370.6563,534.5,366.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536.5" y1="366.6563" y2="366.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="155" y="361.7231">spawn Server A</text><polygon fill="#A80036" points="159,391.7891,149,395.7891,159,399.7891,155,395.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="153" x2="541.5" y1="395.7891" y2="395.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="165" y="390.856">Type::domain_process_connect_request</text><polygon fill="#A80036" points="530.5,420.9219,540.5,424.9219,530.5,428.9219,534.5,424.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536.5" y1="424.9219" y2="424.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="155" y="419.9888">Type::domain_process_connect_reply</text><polygon fill="#A80036" points="159,450.0547,149,454.0547,159,458.0547,155,454.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="153" x2="541.5" y1="454.0547" y2="454.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="165" y="449.1216">Type::domain_server_configuration_request</text><polygon fill="#A80036" points="535.5,479.1875,545.5,483.1875,535.5,487.1875,539.5,483.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="541.5" y1="483.1875" y2="483.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="155" y="478.2544">Type::domain_server_configuration_reply</text><polygon fill="#A80036" points="648,508.3203,658,512.3203,648,516.3203,652,512.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="654" y1="512.3203" y2="512.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="155" y="507.3872">spawn gateway A</text><polygon fill="#A80036" points="159,537.4531,149,541.4531,159,545.4531,155,541.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="153" x2="659" y1="541.4531" y2="541.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="165" y="536.52">Type::domain_process_connect_request</text><polygon fill="#A80036" points="648,566.5859,658,570.5859,648,574.5859,652,570.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="654" y1="570.5859" y2="570.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="155" y="565.6528">Type::domain_process_connect_reply</text><polygon fill="#A80036" points="159,595.7188,149,599.7188,159,603.7188,155,599.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="153" x2="659" y1="599.7188" y2="599.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="165" y="594.7856">Type::domain_configuration_request</text><polygon fill="#A80036" points="648,624.8516,658,628.8516,648,632.8516,652,628.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="143" x2="654" y1="628.8516" y2="628.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="150" y="623.9185">Type::domain_configuration_reply</text><polygon fill="#A80036" points="899,653.9844,909,657.9844,899,661.9844,903,657.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="670" x2="905" y1="657.9844" y2="657.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="677" y="653.0513">spawn outbound (B)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="911" x2="953" y1="692.25" y2="692.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="953" x2="953" y1="692.25" y2="705.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="906" x2="953" y1="705.25" y2="705.25"/><polygon fill="#A80036" points="916,701.25,906,705.25,916,709.25,912,705.25" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="918" y="687.1841">try connect to B</text><rect fill="none" height="989.5156" style="stroke: #000000; stroke-width: 2.0;" width="1923" x="261" y="722.25"/><polygon fill="#EEEEEE" points="261,722.25,360,722.25,360,729.25,350,739.25,261,739.25,261,722.25" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="276" y="735.3169">startup</text><polygon fill="#A80036" points="2070,756.3828,2060,760.3828,2070,764.3828,2066,760.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2064" x2="2151.5" y1="760.3828" y2="760.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="2076" y="755.4497">boot</text><polygon fill="#A80036" points="1757,785.5156,1747,789.5156,1757,793.5156,1753,789.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1751" x2="2048" y1="789.5156" y2="789.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1763" y="784.5825">spawn Server B</text><polygon fill="#A80036" points="2037,814.6484,2047,818.6484,2037,822.6484,2041,818.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1746" x2="2043" y1="818.6484" y2="818.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="1753" y="813.7153">Type::domain_process_connect_request</text><polygon fill="#A80036" points="1757,843.7813,1747,847.7813,1757,851.7813,1753,847.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1751" x2="2048" y1="847.7813" y2="847.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="1763" y="842.8481">Type::domain_process_connect_reply</text><polygon fill="#A80036" points="2037,872.9141,2047,876.9141,2037,880.9141,2041,876.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1746" x2="2043" y1="876.9141" y2="876.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="1753" y="871.981">Type::domain_server_configuration_request</text><polygon fill="#A80036" points="1752,902.0469,1742,906.0469,1752,910.0469,1748,906.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1746" x2="2048" y1="906.0469" y2="906.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="1758" y="901.1138">Type::domain_server_configuration_reply</text><polygon fill="#A80036" points="1586,931.1797,1576,935.1797,1586,939.1797,1582,935.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1580" x2="2048" y1="935.1797" y2="935.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="1592" y="930.2466">spawn gateway B</text><polygon fill="#A80036" points="2037,960.3125,2047,964.3125,2037,968.3125,2041,964.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1575" x2="2043" y1="964.3125" y2="964.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="1582" y="959.3794">Type::domain_process_connect_request</text><polygon fill="#A80036" points="1586,989.4453,1576,993.4453,1586,997.4453,1582,993.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1580" x2="2048" y1="993.4453" y2="993.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="1592" y="988.5122">Type::domain_process_connect_reply</text><polygon fill="#A80036" points="2037,1018.5781,2047,1022.5781,2037,1026.5781,2041,1022.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1575" x2="2043" y1="1022.5781" y2="1022.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="1582" y="1017.645">Type::domain_configuration_request</text><polygon fill="#A80036" points="1586,1047.7109,1576,1051.7109,1586,1055.7109,1582,1051.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1580" x2="2053" y1="1051.7109" y2="1051.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="1592" y="1046.7778">Type::domain_configuration_reply</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1580" x2="1622" y1="1080.9766" y2="1080.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1622" x2="1622" y1="1080.9766" y2="1093.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1581" x2="1622" y1="1093.9766" y2="1093.9766"/><polygon fill="#A80036" points="1591,1089.9766,1581,1093.9766,1591,1097.9766,1587,1093.9766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1587" y="1075.9106">spawn listener (thread)</text><polygon fill="#A80036" points="1558,1148.9766,1568,1152.9766,1558,1156.9766,1562,1152.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="916" x2="1564" y1="1152.9766" y2="1152.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="923" y="1148.0435">connection established (socket X)</text><polygon fill="#A80036" points="1218,1178.1094,1208,1182.1094,1218,1186.1094,1214,1182.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1212" x2="1569" y1="1182.1094" y2="1182.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="1224" y="1177.1763">spawn inbound (socket X)</text><polygon fill="#A80036" points="1185,1249.8086,1195,1253.8086,1185,1257.8086,1189,1253.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="916" x2="1191" y1="1253.8086" y2="1253.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="923" y="1248.8755">Type::gateway_domain_connect_request</text><polygon fill="#FBFB77" filter="url(#f1n1lscafcutnp)" points="486,1225.2422,486,1265.2422,897,1265.2422,897,1235.2422,887,1225.2422,486,1225.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="887" x2="887" y1="1225.2422" y2="1235.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="897" x2="887" y1="1235.2422" y2="1235.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="386" x="492" y="1242.3091">contains domain name and id of A, and  all protocol versions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="492" y="1257.4419">that domain A can speak</text><polygon fill="#A80036" points="927,1304.0742,917,1308.0742,927,1312.0742,923,1308.0742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="921" x2="1196" y1="1308.0742" y2="1308.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="933" y="1303.1411">Type::gateway_domain_connect_reply</text><polygon fill="#FBFB77" filter="url(#f1n1lscafcutnp)" points="1212,1279.5078,1212,1319.5078,1665,1319.5078,1665,1289.5078,1655,1279.5078,1212,1279.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1655" x2="1655" y1="1279.5078" y2="1289.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1665" x2="1655" y1="1289.5078" y2="1289.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="432" x="1218" y="1296.5747">contains domain name and id of B, and the chosen protocol version</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="327" x="1218" y="1311.7075">(or invalid if no compatible protocol could be found)</text><polygon fill="#A80036" points="1553,1345.7734,1563,1349.7734,1553,1353.7734,1557,1349.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1202" x2="1559" y1="1349.7734" y2="1349.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="1209" y="1344.8403">Type::gateway_inbound_connect</text><polygon fill="#A80036" points="676,1379.9063,666,1383.9063,676,1387.9063,672,1383.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="670" x2="905" y1="1383.9063" y2="1383.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="682" y="1378.9731">Type::gateway_outbound_connect</text><polygon fill="#FBFB77" filter="url(#f1n1lscafcutnp)" points="271,1362.9063,271,1387.9063,656,1387.9063,656,1372.9063,646,1362.9063,271,1362.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646" x2="646" y1="1362.9063" y2="1372.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656" x2="646" y1="1372.9063" y2="1372.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="277" y="1379.9731">Give gateway manager information about the connection</text><polygon fill="#A80036" points="1185,1456.8711,1195,1460.8711,1185,1464.8711,1189,1460.8711" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="916" x2="1191" y1="1460.8711" y2="1460.8711"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="923" y="1455.938">Type::gateway_domain_discover_request</text><polygon fill="#FBFB77" filter="url(#f1n1lscafcutnp)" points="600,1402.0391,600,1502.0391,897,1502.0391,897,1412.0391,887,1402.0391,600,1402.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="887" x2="887" y1="1402.0391" y2="1412.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="897" x2="887" y1="1412.0391" y2="1412.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="606" y="1419.106">outbound asks the other domain</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="606" y="1434.2388">if it got some of the provided</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="606" y="1449.3716">services and queues.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="606" y="1464.5044">During startup, this is the configured</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="606" y="1479.6372">services and queues. During runtime this is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="606" y="1494.77">absent requested services or queues.</text><polygon fill="#A80036" points="1553,1528.8359,1563,1532.8359,1553,1536.8359,1557,1532.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1207" x2="1559" y1="1532.8359" y2="1532.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="1214" y="1527.9028">Type::gateway_domain_discover_request</text><polygon fill="#A80036" points="1844,1557.9688,1854,1561.9688,1844,1565.9688,1848,1561.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1575" x2="1850" y1="1561.9688" y2="1561.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="1582" y="1557.0356">Type::gateway_domain_discover_request</text><polygon fill="#A80036" points="1586,1587.1016,1576,1591.1016,1586,1595.1016,1582,1591.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1580" x2="1860" y1="1591.1016" y2="1591.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="1592" y="1586.1685">Type::gateway_domain_discover_reply</text><polygon fill="#A80036" points="1218,1616.2344,1208,1620.2344,1218,1624.2344,1214,1620.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1212" x2="1564" y1="1620.2344" y2="1620.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="334" x="1224" y="1615.3013">Type::gateway_domain_discover_accumulated_reply</text><polygon fill="#A80036" points="927,1645.3672,917,1649.3672,927,1653.3672,923,1649.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="921" x2="1201" y1="1649.3672" y2="1649.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="933" y="1644.4341">Type::gateway_domain_discover_reply</text><polygon fill="#A80036" points="445,1687.0664,435,1691.0664,445,1695.0664,441,1691.0664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="439" x2="910" y1="1691.0664" y2="1691.0664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="451" y="1686.1333">Type::gateway_domain_advertise</text><polygon fill="#FBFB77" filter="url(#f1n1lscafcutnp)" points="921,1662.5,921,1702.5,1209,1702.5,1209,1672.5,1199,1662.5,921,1662.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1199" x2="1199" y1="1662.5" y2="1672.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1209" x2="1199" y1="1672.5" y2="1672.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="927" y="1679.5669">outbound advertises the services that the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="927" y="1694.6997">other domain replied with</text><!--
@startuml
title gateway startup


box "domain A" #LightBlue
   actor "client" as CA
   participant "domain manager" as DMA
   participant "service manager" as BA
   participant "Server A" as SA
   participant "gateway manager" as GA
   participant "outbound" as OA
   
end box

box "domain B"
   participant "inbound" as IB
   participant "gateway manager" as GB 
   participant "Server B" as SB
   participant "service manager" as BB
   participant "domain manager" as DMB
   actor "client" as CB
end box


group startup
CA -> DMA: boot

activate DMA

DMA -> BA: spawn service manager
activate BA
BA -> DMA: Type::domain_process_connect_request
DMA -> BA: Type::domain_process_connect_reply
BA -> DMA: Type::domain_configuration_request
DMA -> BA: Type::domain_configuration_reply
deactivate BA

DMA -> SA: spawn Server A
activate SA
SA -> DMA: Type::domain_process_connect_request
DMA -> SA: Type::domain_process_connect_reply
SA -> DMA: Type::domain_server_configuration_request
DMA -> SA: Type::domain_server_configuration_reply
deactivate SA
DMA -> GA: spawn gateway A

activate GA
GA -> DMA: Type::domain_process_connect_request
DMA -> GA: Type::domain_process_connect_reply
GA -> DMA: Type::domain_configuration_request
DMA -> GA: Type::domain_configuration_reply

deactivate DMA

GA -> OA: spawn outbound (B)
OA -> OA: try connect to B

deactivate GA

deactivate DMA
end


group startup
CB -> DMB: boot

activate DMB

DMB -> SB: spawn Server B
activate SB
SB -> DMB: Type::domain_process_connect_request
DMB -> SB: Type::domain_process_connect_reply
SB -> DMB: Type::domain_server_configuration_request
DMB -> SB: Type::domain_server_configuration_reply
deactivate SB

DMB -> GB: spawn gateway B

activate GB
GB -> DMB: Type::domain_process_connect_request
DMB -> GB: Type::domain_process_connect_reply
GB -> DMB: Type::domain_configuration_request
DMB -> GB: Type::domain_configuration_reply


deactivate DMB

GB -> GB: spawn listener (thread)
activate GB

deactivate DMB



OA -> GB: connection established (socket X)
activate OA



GB -> IB: spawn inbound (socket X)
activate IB
deactivate GB
deactivate IB



OA -> IB: Type::gateway_domain_connect_request
note left
contains domain name and id of A, and  all protocol versions 
that domain A can speak
end note

activate IB
IB -> OA : Type::gateway_domain_connect_reply
note right
contains domain name and id of B, and the chosen protocol version
(or invalid if no compatible protocol could be found)
end note

IB -> GB: Type::gateway_inbound_connect
deactivate IB

OA -> GA: Type::gateway_outbound_connect
note left
Give gateway manager information about the connection
end note


OA -> IB: Type::gateway_domain_discover_request
note left
outbound asks the other domain 
if it got some of the provided 
services and queues.
During startup, this is the configured 
services and queues. During runtime this is
absent requested services or queues.
end note

activate IB
IB -> GB: Type::gateway_domain_discover_request

GB -> BB: Type::gateway_domain_discover_request
activate BB
BB -> GB: Type::gateway_domain_discover_reply
deactivate BB

GB ->IB: Type::gateway_domain_discover_accumulated_reply

IB -> OA: Type::gateway_domain_discover_reply

deactivate IB

OA -> BA: Type::gateway_domain_advertise
note right 
	outbound advertises the services that the
	other domain replied with
end note

deactivate OA

deactivate DMB

deactivate GB
end


deactivate BB
@enduml

PlantUML version 1.2017.16beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>