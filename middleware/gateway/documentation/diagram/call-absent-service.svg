<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2383px" preserveAspectRatio="none" style="width:2594px;height:2383px;" version="1.1" viewBox="0 0 2594 2383" width="2594px" zoomAndPan="magnify"><defs><filter height="300%" id="f1482iqzgmd1v0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="1233.5" y="22.9951">gateway startup</text><rect fill="#ADD8E6" height="2338.0234" style="stroke: #A80036; stroke-width: 1.0;" width="1014.5" x="19" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="491.25" y="46.3638">domain A</text><rect fill="#DDDDDD" height="2338.0234" style="stroke: #A80036; stroke-width: 1.0;" width="1215" x="1260" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="1832.5" y="46.3638">domain B</text><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="2114.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="39.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="1244.3125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="44.5" y="217.8594"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="730.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="44.5" y="1530.4375"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="327.5" y="276.125"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="327.5" y="685.9844"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="60.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="327.5" y="812.5156"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="901.9141"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="113.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="1564.5703"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="1940.4297"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="2231.7578"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="690.5" y="305.2578"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="690.5" y="744.25"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="373.5234"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="156.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="587.4531"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="100.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="872.7813"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1433.0391"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1678.2344"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1911.2969"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1969.5625"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="2202.625"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="402.6563"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="558.3203"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="973.1797"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1031.4453"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1403.9063"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1707.3672"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1882.1641"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1998.6953"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="2173.4922"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1587.5" y="431.7891"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1587.5" y="529.1875"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="35.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="1118.8438"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="1736.5"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="1853.0313"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="2027.8281"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="2144.3594"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2030" y="1765.6328"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2030" y="2056.9609"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="343.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2139" y="1060.5781"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="69.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2144" y="1198.1094"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="213.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2290" y="1089.7109"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2290" y="1794.7656"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2290" y="2086.0938"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2400" y="500.0547"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2400" y="1002.3125"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2400" y="1332.6406"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="582.6563" style="stroke: #000000; stroke-width: 2.0;" width="2468" x="13" y="237.9922"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="635.6563" style="stroke: #000000; stroke-width: 2.0;" width="2570" x="13" y="834.6484"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="784.7188" style="stroke: #000000; stroke-width: 2.0;" width="2326" x="13" y="1484.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="44" x2="44" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="332.5" x2="332.5" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="488.5" x2="488.5" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="695.5" x2="695.5" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="986.5" x2="986.5" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1301" x2="1301" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1592" x2="1592" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1720" x2="1720" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2035" x2="2035" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2144" x2="2144" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2295" x2="2295" y1="136.7266" y2="2286.0234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2405" x2="2405" y1="136.7266" y2="2286.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="23" y="133.4248">client</text><ellipse cx="44.5" cy="63.4297" fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44.5,71.4297 L44.5,98.4297 M31.5,79.4297 L57.5,79.4297 M44.5,98.4297 L31.5,113.4297 M44.5,98.4297 L57.5,113.4297 " fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="23" y="2298.0186">client</text><ellipse cx="44.5" cy="2311.3203" fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44.5,2319.3203 L44.5,2346.3203 M31.5,2327.3203 L57.5,2327.3203 M44.5,2346.3203 L31.5,2361.3203 M44.5,2346.3203 L57.5,2361.3203 " fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="266.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="273.5" y="121.4248">service manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="266.5" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="273.5" y="2305.0186">service manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="408.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="415.5" y="121.4248">transaction manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="408.5" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="415.5" y="2305.0186">transaction manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="625.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="632.5" y="121.4248">gateway manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="625.5" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="632.5" y="2305.0186">gateway manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="943.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="950.5" y="121.4248">outbound</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="943.5" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="950.5" y="2305.0186">outbound</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="1264" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1271" y="121.4248">inbound</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="1264" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1271" y="2305.0186">inbound</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="1555" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1562" y="121.4248">gateway</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="1555" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1562" y="2305.0186">gateway</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="1640" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="1647" y="121.4248">transaction manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="1640" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="1647" y="2305.0186">transaction manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1974" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1981" y="121.4248">resource-proxy</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1974" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1981" y="2305.0186">resource-proxy</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="2106" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="2113" y="121.4248">Server B</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="2106" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="2113" y="2305.0186">Server B</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="2261" y="133.4248">resource</text><path d="M2277,84.4297 C2277,74.4297 2295,74.4297 2295,74.4297 C2295,74.4297 2313,74.4297 2313,84.4297 L2313,110.4297 C2313,120.4297 2295,120.4297 2295,120.4297 C2295,120.4297 2277,120.4297 2277,110.4297 L2277,84.4297 " fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2277,84.4297 C2277,94.4297 2295,94.4297 2295,94.4297 C2295,94.4297 2313,94.4297 2313,84.4297 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="2261" y="2298.0186">resource</text><path d="M2277,2311.3203 C2277,2301.3203 2295,2301.3203 2295,2301.3203 C2295,2301.3203 2313,2301.3203 2313,2311.3203 L2313,2337.3203 C2313,2347.3203 2295,2347.3203 2295,2347.3203 C2295,2347.3203 2277,2347.3203 2277,2337.3203 L2277,2311.3203 " fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2277,2311.3203 C2277,2321.3203 2295,2321.3203 2295,2321.3203 C2295,2321.3203 2313,2321.3203 2313,2311.3203 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="2339" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="2346" y="121.4248">service manager</text><rect fill="#FEFECE" filter="url(#f1482iqzgmd1v0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="2339" y="2285.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="2346" y="2305.0186">service manager</text><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="2114.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="39.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="1244.3125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="44.5" y="217.8594"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="730.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="44.5" y="1530.4375"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="327.5" y="276.125"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="327.5" y="685.9844"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="60.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="327.5" y="812.5156"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="901.9141"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="113.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="1564.5703"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="1940.4297"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483.5" y="2231.7578"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="690.5" y="305.2578"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="690.5" y="744.25"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="373.5234"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="156.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="587.4531"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="100.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="872.7813"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1433.0391"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1678.2344"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1911.2969"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="1969.5625"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="981.5" y="2202.625"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="402.6563"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="558.3203"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="973.1797"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1031.4453"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1403.9063"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1707.3672"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1882.1641"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="1998.6953"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1296.5" y="2173.4922"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1587.5" y="431.7891"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1587.5" y="529.1875"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="35.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="1118.8438"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="1736.5"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="1853.0313"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="2027.8281"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1715" y="2144.3594"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2030" y="1765.6328"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2030" y="2056.9609"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="343.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2139" y="1060.5781"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="69.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2144" y="1198.1094"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="213.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2290" y="1089.7109"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2290" y="1794.7656"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2290" y="2086.0938"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2400" y="500.0547"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2400" y="1002.3125"/><rect fill="#FFFFFF" filter="url(#f1482iqzgmd1v0)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2400" y="1332.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49.5" x2="91.5" y1="167.8594" y2="167.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="91.5" x2="91.5" y1="167.8594" y2="180.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="91.5" y1="180.8594" y2="180.8594"/><polygon fill="#A80036" points="60.5,176.8594,50.5,180.8594,60.5,184.8594,56.5,180.8594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="56.5" y="162.7935">tx_begin</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="49.5" x2="96.5" y1="204.9922" y2="204.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="96.5" x2="96.5" y1="204.9922" y2="217.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="96.5" y1="217.9922" y2="217.9922"/><polygon fill="#A80036" points="65.5,213.9922,55.5,217.9922,65.5,221.9922,61.5,217.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="61.5" y="199.9263">tpcall X</text><rect fill="none" height="582.6563" style="stroke: #000000; stroke-width: 2.0;" width="2468" x="13" y="237.9922"/><polygon fill="#EEEEEE" points="13,237.9922,120,237.9922,120,244.9922,110,254.9922,13,254.9922,13,237.9922" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="28" y="251.0591">discover</text><polygon fill="#A80036" points="315.5,272.125,325.5,276.125,315.5,280.125,319.5,276.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54.5" x2="321.5" y1="276.125" y2="276.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="61.5" y="271.1919">Type::service_name_lookup_request (X)</text><polygon fill="#A80036" points="678.5,301.2578,688.5,305.2578,678.5,309.2578,682.5,305.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="332.5" x2="684.5" y1="305.2578" y2="305.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="339.5" y="300.3247">Type::gateway_domain_discover_request</text><polygon fill="#FBFB77" filter="url(#f1482iqzgmd1v0)" points="519,318.3906,519,343.3906,867,343.3906,867,328.3906,857,318.3906,519,318.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="857" x2="857" y1="318.3906" y2="328.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="867" x2="857" y1="328.3906" y2="328.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="327" x="525" y="335.4575">gateway manager will ask all outbound connections</text><polygon fill="#A80036" points="969.5,369.5234,979.5,373.5234,969.5,377.5234,973.5,373.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="695.5" x2="975.5" y1="373.5234" y2="373.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="702.5" y="368.5903">Type::gateway_domain_discover_request</text><polygon fill="#A80036" points="1284.5,398.6563,1294.5,402.6563,1284.5,406.6563,1288.5,402.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="986.5" x2="1290.5" y1="402.6563" y2="402.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="993.5" y="397.7231">Type::gateway_domain_discover_request</text><polygon fill="#A80036" points="1575.5,427.7891,1585.5,431.7891,1575.5,435.7891,1579.5,431.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1301.5" x2="1581.5" y1="431.7891" y2="431.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="1308.5" y="426.856">Type::gateway_domain_discover_request</text><polygon fill="#FBFB77" filter="url(#f1482iqzgmd1v0)" points="1543,444.9219,1543,469.9219,2454,469.9219,2454,454.9219,2444,444.9219,1543,444.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2444" x2="2444" y1="444.9219" y2="454.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2454" x2="2444" y1="454.9219" y2="454.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="1870.5" y="461.9888">casual-queue could also be requested</text><polygon fill="#A80036" points="2388,496.0547,2398,500.0547,2388,504.0547,2392,500.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1592.5" x2="2394" y1="500.0547" y2="500.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="1599.5" y="495.1216">Type::gateway_domain_discover_request</text><polygon fill="#A80036" points="1608.5,525.1875,1598.5,529.1875,1608.5,533.1875,1604.5,529.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1602.5" x2="2404" y1="529.1875" y2="529.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="1614.5" y="524.2544">Type::gateway_domain_discover_reply</text><polygon fill="#A80036" points="1317.5,554.3203,1307.5,558.3203,1317.5,562.3203,1313.5,558.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1311.5" x2="1591.5" y1="558.3203" y2="558.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="1323.5" y="553.3872">Type::gateway_domain_discover_reply</text><polygon fill="#A80036" points="1002.5,583.4531,992.5,587.4531,1002.5,591.4531,998.5,587.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="996.5" x2="1300.5" y1="587.4531" y2="587.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="1008.5" y="582.52">Type::gateway_domain_discover_reply</text><polygon fill="#FBFB77" filter="url(#f1482iqzgmd1v0)" points="280,600.5859,280,655.5859,1038,655.5859,1038,610.5859,1028,600.5859,280,600.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1028" x2="1028" y1="600.5859" y2="610.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1038" x2="1028" y1="610.5859" y2="610.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="483.5" y="617.6528">We advertise the found services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="483.5" y="632.7856">we might change this and only act on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="483.5" y="647.9185">Type::gateway_domain_discover_accumulated_reply.</text><polygon fill="#A80036" points="348.5,681.9844,338.5,685.9844,348.5,689.9844,344.5,685.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342.5" x2="980.5" y1="685.9844" y2="685.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="354.5" y="681.0513">Type::gateway_domain_advertise (X)</text><polygon fill="#A80036" points="65.5,711.1172,55.5,715.1172,65.5,719.1172,61.5,715.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="59.5" x2="331.5" y1="715.1172" y2="715.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="71.5" y="710.1841">Type::service_name_lookup_reply (X)</text><polygon fill="#A80036" points="711.5,740.25,701.5,744.25,711.5,748.25,707.5,744.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="705.5" x2="985.5" y1="744.25" y2="744.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="717.5" y="739.3169">Type::gateway_domain_discover_reply</text><polygon fill="#FBFB77" filter="url(#f1482iqzgmd1v0)" points="267,757.3828,267,782.3828,761,782.3828,761,767.3828,751,757.3828,267,757.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="751" x2="751" y1="757.3828" y2="767.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="761" x2="751" y1="767.3828" y2="767.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="383" y="774.4497">Could be replies from several domains.</text><polygon fill="#A80036" points="348.5,808.5156,338.5,812.5156,348.5,816.5156,344.5,812.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342.5" x2="694.5" y1="812.5156" y2="812.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="334" x="354.5" y="807.5825">Type::gateway_domain_discover_accumulated_reply</text><rect fill="none" height="635.6563" style="stroke: #000000; stroke-width: 2.0;" width="2570" x="13" y="834.6484"/><polygon fill="#EEEEEE" points="13,834.6484,140,834.6484,140,841.6484,130,851.6484,13,851.6484,13,834.6484" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="28" y="847.7153">call service</text><polygon fill="#A80036" points="969.5,868.7813,979.5,872.7813,969.5,876.7813,973.5,872.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54.5" x2="975.5" y1="872.7813" y2="872.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="61.5" y="867.8481">Type::service_call</text><polygon fill="#A80036" points="504.5,897.9141,494.5,901.9141,504.5,905.9141,500.5,901.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="498.5" x2="980.5" y1="901.9141" y2="901.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="510.5" y="896.981">Type::transaction_external_resource_involved</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="535.5" y1="931.1797" y2="931.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="535.5" x2="535.5" y1="931.1797" y2="944.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="535.5" y1="944.1797" y2="944.1797"/><polygon fill="#A80036" points="504.5,940.1797,494.5,944.1797,504.5,948.1797,500.5,944.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="500.5" y="926.1138">associate trid to resource</text><polygon fill="#A80036" points="1284.5,969.1797,1294.5,973.1797,1284.5,977.1797,1288.5,973.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="986.5" x2="1290.5" y1="973.1797" y2="973.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="993.5" y="968.2466">Type::service_call</text><polygon fill="#A80036" points="2388,998.3125,2398,1002.3125,2388,1006.3125,2392,1002.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1301.5" x2="2394" y1="1002.3125" y2="1002.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="1308.5" y="997.3794">Type::service_name_lookup_request (X)</text><polygon fill="#A80036" points="1317.5,1027.4453,1307.5,1031.4453,1317.5,1035.4453,1313.5,1031.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1311.5" x2="2404" y1="1031.4453" y2="1031.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="1323.5" y="1026.5122">Type::service_name_lookup_reply (x)</text><polygon fill="#A80036" points="2127,1056.5781,2137,1060.5781,2127,1064.5781,2131,1060.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1301.5" x2="2133" y1="1060.5781" y2="1060.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1308.5" y="1055.645">Type::service_call</text><polygon fill="#A80036" points="2278,1085.7109,2288,1089.7109,2278,1093.7109,2282,1089.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2149" x2="2284" y1="1089.7109" y2="1089.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="2156" y="1084.7778">xa_start</text><polygon fill="#A80036" points="1736,1114.8438,1726,1118.8438,1736,1122.8438,1732,1118.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1730" x2="2138" y1="1118.8438" y2="1118.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="1742" y="1113.9106">Type::transaction_resource_involved</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1725" x2="1767" y1="1153.1094" y2="1153.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1767" x2="1767" y1="1153.1094" y2="1166.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1720" x2="1767" y1="1166.1094" y2="1166.1094"/><polygon fill="#A80036" points="1730,1162.1094,1720,1166.1094,1730,1170.1094,1726,1166.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="1732" y="1148.0435">associate trid to rm-id</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2149" x2="2196" y1="1185.2422" y2="1185.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2196" x2="2196" y1="1185.2422" y2="1198.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2155" x2="2196" y1="1198.2422" y2="1198.2422"/><polygon fill="#A80036" points="2165,1194.2422,2155,1198.2422,2165,1202.2422,2161,1198.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="2161" y="1180.1763">call user-service</text><polygon fill="#A80036" points="2278,1228.2422,2288,1232.2422,2278,1236.2422,2282,1232.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2154" x2="2284" y1="1232.2422" y2="1232.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="2161" y="1227.3091">update stuff in db</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2154" x2="2196" y1="1266.5078" y2="1266.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2196" x2="2196" y1="1266.5078" y2="1279.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2149" x2="2196" y1="1279.5078" y2="1279.5078"/><polygon fill="#A80036" points="2159,1275.5078,2149,1279.5078,2159,1283.5078,2155,1279.5078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="2161" y="1261.4419">tpreturn</text><polygon fill="#A80036" points="2283,1299.5078,2293,1303.5078,2283,1307.5078,2287,1303.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2149" x2="2289" y1="1303.5078" y2="1303.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="2156" y="1298.5747">xa_end</text><polygon fill="#A80036" points="2388,1328.6406,2398,1332.6406,2388,1336.6406,2392,1332.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2149" x2="2394" y1="1332.6406" y2="1332.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="2156" y="1327.7075">Type::service_acknowledge</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2410" x2="2452" y1="1361.9063" y2="1361.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2452" x2="2452" y1="1361.9063" y2="1374.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2411" x2="2452" y1="1374.9063" y2="1374.9063"/><polygon fill="#A80036" points="2421,1370.9063,2411,1374.9063,2421,1378.9063,2417,1374.9063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="2417" y="1356.8403">make instance avaliable</text><polygon fill="#A80036" points="1317.5,1399.9063,1307.5,1403.9063,1317.5,1407.9063,1313.5,1403.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1311.5" x2="2143" y1="1403.9063" y2="1403.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="1323.5" y="1398.9731">Type::service_reply</text><polygon fill="#A80036" points="1002.5,1429.0391,992.5,1433.0391,1002.5,1437.0391,998.5,1433.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="996.5" x2="1300.5" y1="1433.0391" y2="1433.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="1008.5" y="1428.106">Type::service_reply</text><polygon fill="#A80036" points="60.5,1458.1719,50.5,1462.1719,60.5,1466.1719,56.5,1462.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54.5" x2="985.5" y1="1462.1719" y2="1462.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="66.5" y="1457.2388">Type::service_reply</text><rect fill="none" height="784.7188" style="stroke: #000000; stroke-width: 2.0;" width="2326" x="13" y="1484.3047"/><polygon fill="#EEEEEE" points="13,1484.3047,201,1484.3047,201,1491.3047,191,1501.3047,13,1501.3047,13,1484.3047" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="28" y="1497.3716">commit transaction</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="49.5" x2="96.5" y1="1517.5703" y2="1517.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="96.5" x2="96.5" y1="1517.5703" y2="1530.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="96.5" y1="1530.5703" y2="1530.5703"/><polygon fill="#A80036" points="65.5,1526.5703,55.5,1530.5703,65.5,1534.5703,61.5,1530.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="61.5" y="1512.5044">tx_commit</text><polygon fill="#A80036" points="471.5,1560.5703,481.5,1564.5703,471.5,1568.5703,475.5,1564.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54.5" x2="477.5" y1="1564.5703" y2="1564.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="61.5" y="1559.6372">Type::transaction_commit_request</text><polygon fill="#FBFB77" filter="url(#f1482iqzgmd1v0)" points="322,1577.7031,322,1647.7031,650,1647.7031,650,1587.7031,640,1577.7031,322,1577.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="640" x2="640" y1="1577.7031" y2="1587.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="640" y1="1587.7031" y2="1587.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="328" y="1594.77">In this particular example it would be</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="328" y="1609.9028">Type::transaction_resource_commit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="328" y="1625.0356">with on-phase-optimization, but we pretend that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="328" y="1640.1685">other resources are involved</text><polygon fill="#A80036" points="969.5,1674.2344,979.5,1678.2344,969.5,1682.2344,973.5,1678.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="975.5" y1="1678.2344" y2="1678.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="495.5" y="1673.3013">Type::transaction_resource_prepare_request</text><polygon fill="#A80036" points="1284.5,1703.3672,1294.5,1707.3672,1284.5,1711.3672,1288.5,1707.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="986.5" x2="1290.5" y1="1707.3672" y2="1707.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="993.5" y="1702.4341">Type::transaction_resource_prepare_request</text><polygon fill="#A80036" points="1703,1732.5,1713,1736.5,1703,1740.5,1707,1736.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1301.5" x2="1709" y1="1736.5" y2="1736.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="1308.5" y="1731.5669">Type::transaction_resource_prepare_request</text><polygon fill="#A80036" points="2018,1761.6328,2028,1765.6328,2018,1769.6328,2022,1765.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1720" x2="2024" y1="1765.6328" y2="1765.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="1727" y="1760.6997">Type::transaction_resource_prepare_request</text><polygon fill="#A80036" points="2278,1790.7656,2288,1794.7656,2278,1798.7656,2282,1794.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2040" x2="2284" y1="1794.7656" y2="1794.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2047" y="1789.8325">xa_prepare</text><polygon fill="#A80036" points="2051,1819.8984,2041,1823.8984,2051,1827.8984,2047,1823.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2045" x2="2294" y1="1823.8984" y2="1823.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="2057" y="1818.9653">xa_prepare XA_OK</text><polygon fill="#A80036" points="1736,1849.0313,1726,1853.0313,1736,1857.0313,1732,1853.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1730" x2="2034" y1="1853.0313" y2="1853.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="1742" y="1848.0981">Type::transaction_resource_prepare_reply</text><polygon fill="#A80036" points="1317.5,1878.1641,1307.5,1882.1641,1317.5,1886.1641,1313.5,1882.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1311.5" x2="1719" y1="1882.1641" y2="1882.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="1323.5" y="1877.231">Type::transaction_resource_prepare_reply</text><polygon fill="#A80036" points="1002.5,1907.2969,992.5,1911.2969,1002.5,1915.2969,998.5,1911.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="996.5" x2="1300.5" y1="1911.2969" y2="1911.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="1008.5" y="1906.3638">Type::transaction_resource_prepare_reply</text><polygon fill="#A80036" points="504.5,1936.4297,494.5,1940.4297,504.5,1944.4297,500.5,1940.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="498.5" x2="985.5" y1="1940.4297" y2="1940.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="510.5" y="1935.4966">Type::transaction_resource_prepare_reply</text><polygon fill="#A80036" points="969.5,1965.5625,979.5,1969.5625,969.5,1973.5625,973.5,1969.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="975.5" y1="1969.5625" y2="1969.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="495.5" y="1964.6294">Type::transaction_resource_commit_request</text><polygon fill="#A80036" points="1284.5,1994.6953,1294.5,1998.6953,1284.5,2002.6953,1288.5,1998.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="986.5" x2="1290.5" y1="1998.6953" y2="1998.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="993.5" y="1993.7622">Type::transaction_resource_commit_request</text><polygon fill="#A80036" points="1703,2023.8281,1713,2027.8281,1703,2031.8281,1707,2027.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1301.5" x2="1709" y1="2027.8281" y2="2027.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="1308.5" y="2022.895">Type::transaction_resource_commit_request</text><polygon fill="#A80036" points="2018,2052.9609,2028,2056.9609,2018,2060.9609,2022,2056.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1720" x2="2024" y1="2056.9609" y2="2056.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="1727" y="2052.0278">Type::transaction_resource_commit_request</text><polygon fill="#A80036" points="2278,2082.0938,2288,2086.0938,2278,2090.0938,2282,2086.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2040" x2="2284" y1="2086.0938" y2="2086.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="2047" y="2081.1606">xa_commit</text><polygon fill="#A80036" points="2051,2111.2266,2041,2115.2266,2051,2119.2266,2047,2115.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2045" x2="2294" y1="2115.2266" y2="2115.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="2057" y="2110.2935">xa_commit XA_OK</text><polygon fill="#A80036" points="1736,2140.3594,1726,2144.3594,1736,2148.3594,1732,2144.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1730" x2="2034" y1="2144.3594" y2="2144.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="1742" y="2139.4263">Type::transaction_resource_commit_reply</text><polygon fill="#A80036" points="1317.5,2169.4922,1307.5,2173.4922,1317.5,2177.4922,1313.5,2173.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1311.5" x2="1719" y1="2173.4922" y2="2173.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="1323.5" y="2168.5591">Type::transaction_resource_commit_reply</text><polygon fill="#A80036" points="1002.5,2198.625,992.5,2202.625,1002.5,2206.625,998.5,2202.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="996.5" x2="1300.5" y1="2202.625" y2="2202.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="1008.5" y="2197.6919">Type::transaction_resource_commit_reply</text><polygon fill="#A80036" points="504.5,2227.7578,494.5,2231.7578,504.5,2235.7578,500.5,2231.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="498.5" x2="985.5" y1="2231.7578" y2="2231.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="510.5" y="2226.8247">Type::transaction_resource_commit_reply</text><polygon fill="#A80036" points="55.5,2256.8906,45.5,2260.8906,55.5,2264.8906,51.5,2260.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49.5" x2="487.5" y1="2260.8906" y2="2260.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="61.5" y="2255.9575">Type::transaction_commit_reply</text><!--
@startuml
title gateway startup


box "domain A" #LightBlue
   actor "client" as CA
   participant "service manager" as BA
   participant "transaction manager" as TMA
   participant "gateway manager" as GA
   participant "outbound" as OA
   
end box

box "domain B"
   participant "inbound" as IB
   participant "gateway" as GB 
   participant "transaction manager" as TMB
   participant "resource-proxy" as RMPB
   participant "Server B" as SB
   database "resource" as RMB
   participant "service manager" as BB
end box



activate CA 
CA -> CA: tx_begin
CA -> CA: tpcall X

group discover

activate CA
CA -> BA: Type::service_name_lookup_request (X)
activate BA
BA -> GA: Type::gateway_domain_discover_request
deactivate BA
activate GA

note over GA
gateway manager will ask all outbound connections
end note
GA -> OA: Type::gateway_domain_discover_request

deactivate GA
activate OA
OA -> IB: Type::gateway_domain_discover_request
deactivate OA
activate IB

IB -> GB: Type::gateway_domain_discover_request
deactivate IB

activate GB
note over GB, BB : casual-queue could also be requested
GB -> BB:Type::gateway_domain_discover_request
deactivate GB
activate BB
BB -> GB: Type::gateway_domain_discover_reply
deactivate BB
activate GB
GB -> IB: Type::gateway_domain_discover_reply
deactivate GB
activate IB


IB -> OA: Type::gateway_domain_discover_reply
deactivate IB
activate OA


note over OA,BA: We advertise the found services\nwe might change this and only act on\nType::gateway_domain_discover_accumulated_reply.
OA -> BA: Type::gateway_domain_advertise (X)
activate BA
BA -> CA: Type::service_name_lookup_reply (X)
deactivate BA

OA -> GA: Type::gateway_domain_discover_reply
deactivate OA
activate GA


note over GA,BA: Could be replies from several domains.

GA -> BA: Type::gateway_domain_discover_accumulated_reply
deactivate GA
activate BA

end

group call service

CA -> OA: Type::service_call
deactivate BA
activate OA
OA -> TMA: Type::transaction_external_resource_involved
activate TMA
TMA -> TMA: associate trid to resource
OA -> IB: Type::service_call
deactivate TMA
deactivate OA
activate IB

IB -> BB: Type::service_name_lookup_request (X)
deactivate IB
activate BB
BB -> IB: Type::service_name_lookup_reply (x)
deactivate BB
activate IB

' service call to SB
IB -> SB: Type::service_call
deactivate IB
activate SB
SB -> RMB: xa_start
activate RMB
SB -> TMB: Type::transaction_resource_involved
activate TMB
TMB -> TMB: associate trid to rm-id
deactivate TMB

SB -> SB: call user-service
activate SB

SB -> RMB: update stuff in db
SB -> SB: tpreturn
deactivate SB

SB -> RMB: xa_end
deactivate RMB

SB -> BB: Type::service_acknowledge

activate BB
BB -> BB: make instance avaliable
SB -> IB: Type::service_reply
deactivate BB
deactivate SB



activate IB
IB -> OA: Type::service_reply
deactivate IB
activate OA
OA -> CA: Type::service_reply
deactivate OA
deactivate CA

end

group commit transaction

CA -> CA: tx_commit
activate CA
CA -> TMA: Type::transaction_commit_request
activate TMA

note over TMA
  In this particular example it would be
  Type::transaction_resource_commit
  with on-phase-optimization, but we pretend that
  other resources are involved
end note 

TMA -> OA: Type::transaction_resource_prepare_request
deactivate TMA
activate OA



OA -> IB: Type::transaction_resource_prepare_request
deactivate OA
activate IB
IB -> TMB: Type::transaction_resource_prepare_request
deactivate IB
activate TMB
TMB -> RMPB: Type::transaction_resource_prepare_request
deactivate TMB
activate RMPB

RMPB -> RMB: xa_prepare
activate RMB
RMB -> RMPB: xa_prepare XA_OK
deactivate RMB

RMPB -> TMB: Type::transaction_resource_prepare_reply
deactivate RMPB
activate TMB

TMB -> IB: Type::transaction_resource_prepare_reply
deactivate TMB
activate IB
IB -> OA: Type::transaction_resource_prepare_reply
deactivate IB
activate OA
OA -> TMA: Type::transaction_resource_prepare_reply
deactivate OA
activate TMA

TMA -> OA: Type::transaction_resource_commit_request
deactivate TMA
activate OA
OA -> IB: Type::transaction_resource_commit_request
deactivate OA
activate IB
IB -> TMB: Type::transaction_resource_commit_request
deactivate IB
activate TMB
TMB -> RMPB: Type::transaction_resource_commit_request
deactivate TMB
activate RMPB

RMPB -> RMB: xa_commit
activate RMB
RMB -> RMPB: xa_commit XA_OK
deactivate RMB

RMPB -> TMB: Type::transaction_resource_commit_reply
deactivate RMPB
activate TMB
TMB -> IB: Type::transaction_resource_commit_reply
deactivate TMB
activate IB
IB -> OA: Type::transaction_resource_commit_reply
deactivate IB
activate OA
OA -> TMA: Type::transaction_resource_commit_reply
deactivate OA
activate TMA
TMA -> CA: Type::transaction_commit_reply
deactivate TMA
deactivate CA
deactivate CA

deactivate BB

end
@enduml

PlantUML version 1.2017.16beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>