<?xml version="1.0"?>
<domain>
 <name>domain-name</name>
 <global>
  <note>'domain global' config. Aggregates right to left</note>
  <service>
   <note>Will be used for services that are not explicitly configured.</note>
   <execution>
    <timeout>
     <duration>2h</duration>
     <contract>linger</contract>
    </timeout>
   </execution>
  </service>
 </global>
 <default>
  <note>'default', fallback, configuration. Will only affect 'local' configuration and will not aggregate 'between' configurations</note>
  <server>
   <instances>1</instances>
   <restart>true</restart>
   <memberships>
    <element>customer-group</element>
   </memberships>
   <environment>
    <variables>
     <element>
      <key>SOME_VARIABLE</key>
      <value>foo</value>
     </element>
    </variables>
   </environment>
  </server>
  <executable>
   <instances>1</instances>
   <restart>false</restart>
  </executable>
  <service>
   <execution>
    <timeout>
     <duration>20s</duration>
    </timeout>
   </execution>
   <visibility>discoverable</visibility>
  </service>
 </default>
 <environment>
  <variables>
   <element>
    <key>SOME_VARIABLE</key>
    <value>42</value>
   </element>
   <element>
    <key>SOME_OTHER_VARIABLE</key>
    <value>some value</value>
   </element>
  </variables>
 </environment>
 <groups>
  <element>
   <name>common-group</name>
   <note>group that logically groups 'common' stuff</note>
  </element>
  <element>
   <name>customer-group</name>
   <note>group that logically groups 'customer' stuff</note>
   <resources>
    <element>customer-db</element>
   </resources>
   <dependencies>
    <element>common-group</element>
   </dependencies>
  </element>
  <element>
   <name>sales-group</name>
   <note>group that logically groups 'customer' stuff</note>
   <resources>
    <element>sales-db</element>
    <element>event-queue</element>
   </resources>
   <dependencies>
    <element>customer-group</element>
   </dependencies>
  </element>
 </groups>
 <servers>
  <element>
   <path>/some/path/customer-server-1</path>
   <memberships>
    <element>customer-group</element>
   </memberships>
  </element>
  <element>
   <path>/some/path/customer-server-2</path>
   <memberships>
    <element>customer-group</element>
   </memberships>
  </element>
  <element>
   <path>/some/path/sales-server</path>
   <alias>sales-pre</alias>
   <note>the only services that will be advertised are the ones who matches regex "preSales.*"</note>
   <instances>10</instances>
   <memberships>
    <element>sales-group</element>
   </memberships>
   <restrictions>
    <element>preSales.*</element>
   </restrictions>
  </element>
  <element>
   <path>/some/path/sales-server</path>
   <alias>sales-post</alias>
   <note>he only services that will be advertised are the ones who matches regex "postSales.*"</note>
   <memberships>
    <element>sales-group</element>
   </memberships>
   <restrictions>
    <element>postSales.*</element>
   </restrictions>
  </element>
  <element>
   <path>/some/path/sales-broker</path>
   <memberships>
    <element>sales-group</element>
   </memberships>
   <environment>
    <variables>
     <element>
      <key>SALES_BROKER_VARIABLE</key>
      <value>556</value>
     </element>
    </variables>
   </environment>
   <resources>
    <element>event-queue</element>
   </resources>
  </element>
 </servers>
 <executables>
  <element>
   <path>/some/path/mq-server</path>
   <arguments>
    <element>--configuration</element>
    <element>/path/to/configuration</element>
   </arguments>
   <memberships>
    <element>common-group</element>
   </memberships>
  </element>
 </executables>
 <services>
  <element>
   <name>a</name>
   <execution>
    <timeout>
     <duration>64ms</duration>
     <contract>abort</contract>
    </timeout>
   </execution>
   <routes>
    <element>b</element>
    <element>c</element>
   </routes>
   <visibility>undiscoverable</visibility>
  </element>
 </services>
</domain>
