# configuration transaction

[//]: # (Attention! this is a generated markdown from casual-configuration-documentation - do not edit this file!)

This is the runtime configuration for a casual domain.

The sections can be splitted in arbitrary ways, and aggregated to one configuration model `casual` uses.
Same sections can be defined in different files, hence, give more or less unlimited configuration setup.

Most of the _sections_ has a property `note` for the user to provide descriptions of the documentation. 
The examples further down uses this to make it easier to understand the examples by them self. But can of
course be used as a mean to help document actual production configuration.  



## transaction

Defines transaction related configuration.

### log

The path of the distributed transactions log file. When a distributed transaction reaches prepare,
this state is persistent stored, before the actual commit stage.

if `:memory:` is used, the log is non-persistent. 

### resources

Defines all resources that `servers` and `executables` can be associated with, within this configuration.

property       | description
---------------|----------------------------------------------------
key            | the resource key - correlates to a defined resource in the resource.property (for current _machine_)
name           | a user defined name, used to correlate this resource within the rest of the configuration. 
instances      | number of resource-proxy instances transaction-manger should start. To handle distributed transactions
openinfo       | resources specific _open_ configurations for the particular resource.
closeinfo      | resources specific _close_ configurations for the particular resource.
## examples 

Below follows examples in human readable formats that `casual` can handle

### yaml
```` yaml
---
domain:
  transaction:
    default:
      resource:
        key: "db2_rm"
        instances: 3
    log: "/some/fast/disk/domain.A42/transaction.log"
    resources:
      - name: "customer-db"
        instances: 5
        note: "this resource is named 'customer-db' - using the default rm-key (db_rm) - overrides the default rm-instances to 5"
        openinfo: "db=customer,uid=db2,pwd=db2"
      - name: "sales-db"
        note: "this resource is named 'sales-db' - using the default rm-key (db_rm) - using default rm-instances"
        openinfo: "db=sales,uid=db2,pwd=db2"
      - name: "event-queue"
        key: "mq_rm"
        note: "this resource is named 'event-queue' - overrides rm-key - using default rm-instances"
        openinfo: "some-mq-specific-stuff"
        closeinfo: "some-mq-specific-stuff"
...

````
### json
```` json
{
    "domain": {
        "transaction": {
            "default": {
                "resource": {
                    "key": "db2_rm",
                    "instances": 3
                }
            },
            "log": "/some/fast/disk/domain.A42/transaction.log",
            "resources": [
                {
                    "name": "customer-db",
                    "instances": 5,
                    "note": "this resource is named 'customer-db' - using the default rm-key (db_rm) - overrides the default rm-instances to 5",
                    "openinfo": "db=customer,uid=db2,pwd=db2"
                },
                {
                    "name": "sales-db",
                    "note": "this resource is named 'sales-db' - using the default rm-key (db_rm) - using default rm-instances",
                    "openinfo": "db=sales,uid=db2,pwd=db2"
                },
                {
                    "name": "event-queue",
                    "key": "mq_rm",
                    "note": "this resource is named 'event-queue' - overrides rm-key - using default rm-instances",
                    "openinfo": "some-mq-specific-stuff",
                    "closeinfo": "some-mq-specific-stuff"
                }
            ]
        }
    }
}
````
### ini
```` ini

[domain]

[domain.transaction]
log=/some/fast/disk/domain.A42/transaction.log

[domain.transaction.default]

[domain.transaction.default.resource]
instances=3
key=db2_rm

[domain.transaction.resources]
instances=5
name=customer-db
note=this resource is named 'customer-db' - using the default rm-key (db_rm) - overrides the default rm-instances to 5
openinfo=db=customer,uid=db2,pwd=db2

[domain.transaction.resources]
name=sales-db
note=this resource is named 'sales-db' - using the default rm-key (db_rm) - using default rm-instances
openinfo=db=sales,uid=db2,pwd=db2

[domain.transaction.resources]
closeinfo=some-mq-specific-stuff
key=mq_rm
name=event-queue
note=this resource is named 'event-queue' - overrides rm-key - using default rm-instances
openinfo=some-mq-specific-stuff

````
### xml
```` xml
<?xml version="1.0"?>
<domain>
 <transaction>
  <default>
   <resource>
    <key>db2_rm</key>
    <instances>3</instances>
   </resource>
  </default>
  <log>/some/fast/disk/domain.A42/transaction.log</log>
  <resources>
   <element>
    <name>customer-db</name>
    <instances>5</instances>
    <note>this resource is named 'customer-db' - using the default rm-key (db_rm) - overrides the default rm-instances to 5</note>
    <openinfo>db=customer,uid=db2,pwd=db2</openinfo>
   </element>
   <element>
    <name>sales-db</name>
    <note>this resource is named 'sales-db' - using the default rm-key (db_rm) - using default rm-instances</note>
    <openinfo>db=sales,uid=db2,pwd=db2</openinfo>
   </element>
   <element>
    <name>event-queue</name>
    <key>mq_rm</key>
    <note>this resource is named 'event-queue' - overrides rm-key - using default rm-instances</note>
    <openinfo>some-mq-specific-stuff</openinfo>
    <closeinfo>some-mq-specific-stuff</closeinfo>
   </element>
  </resources>
 </transaction>
</domain>

````
