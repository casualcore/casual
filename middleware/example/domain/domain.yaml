domain:

  name: domain1
  
  transactionmanager:
      path: /opt/casual/bin/casual-transaction-manager # development purpose only
      database: "transaction-manager.db" #optional

  #
  # Default configuriation.
  # These will be assigned to every instance that doesn't have them defined
  #
  default:
  
    server:
      instances: 1
      restart: false
   
    service:
      timeout: 90s  
   

  groups: 
      
    - name: group1  # this name is used to bind servers (via membership) to one or more groups      
      note: mockup-test
      
      #
      # a group can bind to 0..* resources 
      #
      resources:
        - key: rm-mockup  # this key have to be defined in resurces.(yaml|json|xml|ini) 
          instances: 3    # how many resource-proxy instanses TM should spawn.
          openinfo: "some openinfo string"  # the openinfo-string the resource needs
          closeinfo: "some close info" # the closeinfo-string the resource needs (not very common)
        
    - name: group2
      note: some non rm group
      dependencies:
        - group1  # groups can have dependencies to other groups. Affects the boot-order of servers.


    - name: casual-queue
      note: casual-queue resource group
      resources:
        - key: casual-queue-rm
          instances: 1
          openinfo: "bla bla bla"

    
  servers: 
    
      #  
      # path to the server. If servers path are in PATH environment variable
      # one can omitt the path part, and only use the executable name
      #  
    - path: /opt/casual/bin/casual-traffic-monitor
      
      arguments: [ -db, monitor.db ]  # arbitary arguments that your server needs
      instances: 1 # how many instances should be started
      note: The monitor
      memberships:  # which groups this server is member of [0..*]
        - group1
        
    - path: /opt/casual/bin/casual-traffic-log
      arguments: [ -f, statistics.log ]
      instances: 1
      note: The monitor
      memberships:
        - group1
 
    - alias: someServer # the name that the outside world refers to, ex: to change number of instances and such
      note: Some testserver...
      path: /opt/casual/bin/test
      instances: 5 
      
      # if the server terminates/cores on it's own, casaul will continue to start instances to meet 
      # the configured number of instances. [any other value than 'true' is treated as 'false']
      restart: true 
      memberships:
        - group1
        - casual-queue
       
    - alias: someOther
      note: Some testserver...
      path: /opt/casual/bin/test
      instances: 0
      memberships:
        - group1
        - casual-queue
      restriction: # at most the following services will be advertised for this server.
        - casual_test1
        - casual_test2
        

    - alias: sf-server
      note: Some testserver...
      path: /opt/casual/bin/sf_test
      instances: 0
      memberships:
        - group2 

    - alias: casual-queue
      path: casual-queue-broker
      arguments: [ -c, configuration/queue.yaml ]
      instances: 1
      memberships: [ casual-queue]

    - alias: casual-queue-server
      path: casual-queue-server
      instances: 2
      memberships:
        - casual-queue

    - alias: forward-queue1-queue2
      path: casual-queue-forward-queue
      arguments: [ -f, queue1, queue2]
      instances: 1
      memberships: [ casual-queue]
        
   
    - alias: service-forward-queue2-casual.echo
      path: casual-queue-forward-service
      arguments: [ -f, queue2, casual.echo, queue3]
      instances: 1
      memberships: [ casual-queue]
      
    - alias: forward-queue3-queueB1
      path: casual-queue-forward-queue
      arguments: [ -f, queue3, queueB1]
      instances: 1
      memberships: [ casual-queue]

    - alias: service-forward-queueB1-casual.echo-B2
      path: casual-queue-forward-service
      arguments: [ -f, queueB1, casual.echo, queueB2]
      instances: 1
      memberships: [ casual-queue]
      
  # arbitrary executables that will be executed. On shutdown SIG_TERM will be signaled (if they're still alive)
  executables:

    
    - alias: echo
      note: echo, echo...
      path: /bin/echo
      arguments: [casual is the greatest thing since sliced bread]
      instances: 0

  #
  # specific configuration for services (if needed)
  #  
  services:
    - name: casual_test2  # the service this configuration is for.
      
      #
      # The one and only timeout in casual. Dictates how long
      # a caller should wait for a reply.
      #
      # following units can be used: us, ms, s, min, h.
      #
      timeout: 4s  # overridden timeout from the default
      
      #
      # only the following services is allowed to call the service
      # To enable a "protection" for a service. Could be helpfull to enforce
      # some enterprise guidlines/policies
      # 
      authorized: 
        - casual_test1  





