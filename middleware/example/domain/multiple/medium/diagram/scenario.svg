<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1002px" preserveAspectRatio="none" style="width:1159px;height:1002px;" version="1.1" viewBox="0 0 1159 1002" width="1159px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o8nm7gtv8y5d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="317" x="423" y="22.9951">casual medium multiple domain example</text><rect fill="#ADD8E6" height="966.7813" style="stroke: #A80036; stroke-width: 1.0;" width="601.5" x="19" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="287.25" y="46.3638">domainA</text><rect fill="#DDDDDD" height="966.7813" style="stroke: #A80036; stroke-width: 1.0;" width="521.5" x="622.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="850.75" y="46.3638">domainB</text><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="160.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="34.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="439.7891"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="820.25"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="78.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="305.5" y="791.1172"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="14.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="433" y="673.7188"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="817" y="234.9922"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="173.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="944.5" y="367.5234"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="129.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1075.5" y="601.4531"/><rect fill="#EEEEEE" filter="url(#f1o8nm7gtv8y5d)" height="161.6641" style="stroke: #000000; stroke-width: 2.0;" width="875" x="13" y="153.7266"/><rect fill="#EEEEEE" filter="url(#f1o8nm7gtv8y5d)" height="219.9297" style="stroke: #000000; stroke-width: 2.0;" width="965" x="56" y="329.3906"/><rect fill="#EEEEEE" filter="url(#f1o8nm7gtv8y5d)" height="175.6641" style="stroke: #000000; stroke-width: 2.0;" width="778" x="372" y="563.3203"/><rect fill="#EEEEEE" filter="url(#f1o8nm7gtv8y5d)" height="144.7969" style="stroke: #000000; stroke-width: 2.0;" width="493.5" x="56" y="752.9844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="39" x2="39" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="103" x2="103" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="310" x2="310" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="438" x2="438" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="578.5" x2="578.5" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="663.5" x2="663.5" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="822" x2="822" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="949" x2="949" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1080" x2="1080" y1="136.7266" y2="914.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="23" y="133.4248">You</text><ellipse cx="39.5" cy="63.4297" fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39.5,71.4297 L39.5,98.4297 M26.5,79.4297 L52.5,79.4297 M39.5,98.4297 L26.5,113.4297 M39.5,98.4297 L52.5,113.4297 " fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="23" y="926.7764">You</text><ellipse cx="39.5" cy="940.0781" fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39.5,948.0781 L39.5,975.0781 M26.5,956.0781 L52.5,956.0781 M39.5,975.0781 L26.5,990.0781 M39.5,975.0781 L52.5,990.0781 " fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="66" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="73" y="121.4248">Server A</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="66" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="73" y="933.7764">Server A</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="249" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="256" y="121.4248">service-forward</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="249" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="256" y="933.7764">service-forward</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="382" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="389" y="121.4248">casual-queue</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="382" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="389" y="933.7764">casual-queue</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="541.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="548.5" y="121.4248">gateway</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="541.5" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="548.5" y="933.7764">gateway</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="626.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="633.5" y="121.4248">gateway</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="626.5" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="633.5" y="933.7764">gateway</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="766" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="773" y="121.4248">casual-queue</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="766" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="773" y="933.7764">casual-queue</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="888" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="895" y="121.4248">service-forward</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="888" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="895" y="933.7764">service-forward</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1021" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1028" y="121.4248">queue-forward</text><rect fill="#FEFECE" filter="url(#f1o8nm7gtv8y5d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1021" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1028" y="933.7764">queue-forward</text><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="160.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="34.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="439.7891"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="820.25"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="78.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="305.5" y="791.1172"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="14.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="433" y="673.7188"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="817" y="234.9922"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="173.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="944.5" y="367.5234"/><rect fill="#FFFFFF" filter="url(#f1o8nm7gtv8y5d)" height="129.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1075.5" y="601.4531"/><rect fill="none" height="161.6641" style="stroke: #000000; stroke-width: 2.0;" width="875" x="13" y="153.7266"/><polygon fill="#EEEEEE" points="13,153.7266,159,153.7266,159,160.7266,149,170.7266,13,170.7266,13,153.7266" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="28" y="166.7935">in transaction</text><polygon fill="#A80036" points="567,187.8594,577,191.8594,567,195.8594,571,191.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44.5" x2="573" y1="191.8594" y2="191.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="51.5" y="186.9263">enqueue to queueB1</text><polygon fill="#A80036" points="652,201.9922,662,205.9922,652,209.9922,656,205.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="579" x2="658" y1="205.9922" y2="205.9922"/><polygon fill="#A80036" points="805,230.9922,815,234.9922,805,238.9922,809,234.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="811" y1="234.9922" y2="234.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="671" y="230.0591">enqueue to queueB1</text><polygon fill="#A80036" points="675,260.125,665,264.125,675,268.125,671,264.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="669" x2="821" y1="264.125" y2="264.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="681" y="259.1919">message id</text><polygon fill="#A80036" points="590,274.2578,580,278.2578,590,282.2578,586,278.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="663" y1="278.2578" y2="278.2578"/><polygon fill="#A80036" points="50.5,303.2578,40.5,307.2578,50.5,311.2578,46.5,307.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44.5" x2="578" y1="307.2578" y2="307.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="56.5" y="302.3247">message id</text><rect fill="none" height="219.9297" style="stroke: #000000; stroke-width: 2.0;" width="965" x="56" y="329.3906"/><polygon fill="#EEEEEE" points="56,329.3906,202,329.3906,202,336.3906,192,346.3906,56,346.3906,56,329.3906" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="71" y="342.4575">in transaction</text><polygon fill="#A80036" points="932.5,363.5234,942.5,367.5234,932.5,371.5234,936.5,367.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="822" x2="938.5" y1="367.5234" y2="367.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="829" y="362.5903">dequeue B1</text><polygon fill="#A80036" points="675,392.6563,665,396.6563,675,400.6563,671,396.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="669" x2="943.5" y1="396.6563" y2="396.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="681" y="391.7231">call casual.example.echo</text><polygon fill="#A80036" points="590,406.7891,580,410.7891,590,414.7891,586,410.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="663" y1="410.7891" y2="410.7891"/><polygon fill="#A80036" points="119.5,435.7891,109.5,439.7891,119.5,443.7891,115.5,439.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113.5" x2="578" y1="439.7891" y2="439.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="125.5" y="434.856">call casual.example.echo</text><polygon fill="#A80036" points="567,464.9219,577,468.9219,567,472.9219,571,468.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103.5" x2="573" y1="468.9219" y2="468.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="110.5" y="463.9888">reply</text><polygon fill="#A80036" points="652,479.0547,662,483.0547,652,487.0547,656,483.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="579" x2="658" y1="483.0547" y2="483.0547"/><polygon fill="#A80036" points="932.5,508.0547,942.5,512.0547,932.5,516.0547,936.5,512.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="938.5" y1="512.0547" y2="512.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="671" y="507.1216">echo reply</text><polygon fill="#A80036" points="833,537.1875,823,541.1875,833,545.1875,829,541.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="827" x2="948.5" y1="541.1875" y2="541.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="839" y="536.2544">enqueue B2</text><rect fill="none" height="175.6641" style="stroke: #000000; stroke-width: 2.0;" width="778" x="372" y="563.3203"/><polygon fill="#EEEEEE" points="372,563.3203,518,563.3203,518,570.3203,508,580.3203,372,580.3203,372,563.3203" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="387" y="576.3872">in transaction</text><polygon fill="#A80036" points="1063.5,597.4531,1073.5,601.4531,1063.5,605.4531,1067.5,601.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="822" x2="1069.5" y1="601.4531" y2="601.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="829" y="596.52">dequeue B2</text><polygon fill="#A80036" points="675,626.5859,665,630.5859,675,634.5859,671,630.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="669" x2="1074.5" y1="630.5859" y2="630.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="681" y="625.6528">enqueue queueA1</text><polygon fill="#A80036" points="590,640.7188,580,644.7188,590,648.7188,586,644.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="663" y1="644.7188" y2="644.7188"/><polygon fill="#A80036" points="454,669.7188,444,673.7188,454,677.7188,450,673.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="448" x2="578" y1="673.7188" y2="673.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="460" y="668.7856">enqueue queueA1</text><polygon fill="#A80036" points="567,683.8516,577,687.8516,567,691.8516,571,687.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="438" x2="573" y1="687.8516" y2="687.8516"/><polygon fill="#A80036" points="652,697.8516,662,701.8516,652,705.8516,656,701.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="579" x2="658" y1="701.8516" y2="701.8516"/><polygon fill="#A80036" points="1068.5,726.8516,1078.5,730.8516,1068.5,734.8516,1072.5,730.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="1074.5" y1="730.8516" y2="730.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="671" y="725.9185">message id</text><rect fill="none" height="144.7969" style="stroke: #000000; stroke-width: 2.0;" width="493.5" x="56" y="752.9844"/><polygon fill="#EEEEEE" points="56,752.9844,202,752.9844,202,759.9844,192,769.9844,56,769.9844,56,752.9844" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="71" y="766.0513">in transaction</text><polygon fill="#A80036" points="326.5,787.1172,316.5,791.1172,326.5,795.1172,322.5,791.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="320.5" x2="437" y1="791.1172" y2="791.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="332.5" y="786.1841">dequeue A1</text><polygon fill="#A80036" points="119.5,816.25,109.5,820.25,119.5,824.25,115.5,820.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113.5" x2="304.5" y1="820.25" y2="820.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="125.5" y="815.3169">call casual.example.rollback</text><polygon fill="#A80036" points="298.5,865.5156,308.5,869.5156,298.5,873.5156,302.5,869.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103.5" x2="304.5" y1="869.5156" y2="869.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="110.5" y="864.5825">reply TPFAIL</text><polygon fill="#FBFB77" filter="url(#f1o8nm7gtv8y5d)" points="320,833.3828,320,888.3828,530,888.3828,530,843.3828,520,833.3828,320,833.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="520" x2="520" y1="833.3828" y2="843.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="530" x2="520" y1="843.3828" y2="843.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="326" y="850.4497">This will rollback the dequeue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="326" y="865.5825">and move the message to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="326" y="880.7153">queueA1.error</text><!--
@startuml
title casual medium multiple domain example

box "domainA" #LightBlue
   actor "You" as AA
   participant "Server A" as SA
   participant "service-forward" as SFA
   participant "casual-queue" as QA
   participant "gateway" as GA
end box

box "domainB"
   participant "gateway" as GB 
   participant "casual-queue" as QB
   participant "service-forward" as SFB
   participant "queue-forward" as QFB
end box

activate AA

group #eeeeee in transaction 
AA -> GA: enqueue to queueB1
GA -> GB:
GB -> QB: enqueue to queueB1
activate QB
QB -> GB: message id
deactivate QB
GB -> GA:
GA -> AA: message id
deactivate AA
end

group #eeeeee in transaction
QB -> SFB: dequeue B1
activate SFB
SFB -> GB: call casual.example.echo 
GB -> GA:
GA -> SA: call casual.example.echo 
activate SA
SA -> GA: reply 
deactivate SA
GA -> GB
GB -> SFB: echo reply
SFB -> QB: enqueue B2
deactivate SFB
end

group #eeeeee in transaction
QB -> QFB: dequeue B2
activate QFB
QFB -> GB: enqueue queueA1
GB -> GA
GA -> QA: enqueue queueA1
activate QA
QA -> GA
deactivate QA
GA -> GB
GB -> QFB: message id

deactivate QFB
end

group #eeeeee in transaction

QA -> SFA: dequeue A1
activate SFA
SFA -> SA: call casual.example.rollback
activate SA
SA -> SFA: reply TPFAIL
note right 
   This will rollback the dequeue 
   and move the message to 
   queueA1.error
end note

deactivate SA

deactivate SFA

end
@enduml

PlantUML version 2017.11(Wed Apr 19 16:18:59 UTC 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>