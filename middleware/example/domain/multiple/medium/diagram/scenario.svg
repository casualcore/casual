<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1012px" preserveAspectRatio="none" style="width:1203px;height:1012px;" version="1.1" viewBox="0 0 1203 1012" width="1203px" zoomAndPan="magnify"><defs><filter height="300%" id="f798ozgas93g7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="317" x="444" y="22.9951">casual medium multiple domain example</text><rect fill="#ADD8E6" height="966.7813" style="stroke: #A80036; stroke-width: 1.0;" width="635.5" x="19" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="304.25" y="46.3638">domainA</text><rect fill="#DDDDDD" height="966.7813" style="stroke: #A80036; stroke-width: 1.0;" width="529.5" x="656.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="888.75" y="46.3638">domainB</text><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="160.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="34.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="439.9219"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="820.3828"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="78.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="331.5" y="791.25"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="459" y="673.8516"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="859" y="235.125"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="173.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="986.5" y="367.6563"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="129.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1117.5" y="601.5859"/><rect fill="#EEEEEE" filter="url(#f798ozgas93g7)" height="161.6641" style="stroke: #000000; stroke-width: 2.0;" width="917" x="13" y="153.7266"/><rect fill="#EEEEEE" filter="url(#f798ozgas93g7)" height="219.9297" style="stroke: #000000; stroke-width: 2.0;" width="1007" x="56" y="329.3906"/><rect fill="#EEEEEE" filter="url(#f798ozgas93g7)" height="175.6641" style="stroke: #000000; stroke-width: 2.0;" width="794" x="398" y="563.3203"/><rect fill="#EEEEEE" filter="url(#f798ozgas93g7)" height="144.7969" style="stroke: #000000; stroke-width: 2.0;" width="519.5" x="56" y="752.9844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="39" x2="39" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="103" x2="103" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="336" x2="336" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="464" x2="464" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="612.5" x2="612.5" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="697.5" x2="697.5" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="864" x2="864" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="991" x2="991" y1="136.7266" y2="914.7813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1122" x2="1122" y1="136.7266" y2="914.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="23" y="133.4248">You</text><ellipse cx="39.5" cy="63.4297" fill="#FEFECE" filter="url(#f798ozgas93g7)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39.5,71.4297 L39.5,98.4297 M26.5,79.4297 L52.5,79.4297 M39.5,98.4297 L26.5,113.4297 M39.5,98.4297 L52.5,113.4297 " fill="none" filter="url(#f798ozgas93g7)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="23" y="926.7764">You</text><ellipse cx="39.5" cy="940.0781" fill="#FEFECE" filter="url(#f798ozgas93g7)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39.5,948.0781 L39.5,975.0781 M26.5,956.0781 L52.5,956.0781 M39.5,975.0781 L26.5,990.0781 M39.5,975.0781 L52.5,990.0781 " fill="none" filter="url(#f798ozgas93g7)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="66" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="73" y="121.4248">Server A</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="66" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="73" y="933.7764">Server A</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="275" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="282" y="121.4248">service-forward</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="275" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="282" y="933.7764">service-forward</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="408" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="415" y="121.4248">casual-queue</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="408" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="415" y="933.7764">casual-queue</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="575.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="582.5" y="121.4248">gateway</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="575.5" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="582.5" y="933.7764">gateway</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="660.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="667.5" y="121.4248">gateway</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="660.5" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="667.5" y="933.7764">gateway</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="808" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="815" y="121.4248">casual-queue</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="808" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="815" y="933.7764">casual-queue</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="930" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="937" y="121.4248">service-forward</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="930" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="937" y="933.7764">service-forward</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1063" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1070" y="121.4248">queue-forward</text><rect fill="#FEFECE" filter="url(#f798ozgas93g7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1063" y="913.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1070" y="933.7764">queue-forward</text><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="160.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="34.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="439.9219"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98.5" y="820.3828"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="78.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="331.5" y="791.25"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="459" y="673.8516"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="859" y="235.125"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="173.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="986.5" y="367.6563"/><rect fill="#FFFFFF" filter="url(#f798ozgas93g7)" height="129.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1117.5" y="601.5859"/><path d="M13,153.7266 L159,153.7266 L159,160.7266 L149,170.7266 L13,170.7266 L13,153.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.6641" style="stroke: #000000; stroke-width: 2.0;" width="917" x="13" y="153.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="28" y="166.7935">in transaction</text><polygon fill="#A80036" points="601,187.9922,611,191.9922,601,195.9922,605,191.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44.5" x2="607" y1="191.9922" y2="191.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="51.5" y="186.9263">enqueue to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="128.5" y="186.9263">queueB1</text><polygon fill="#A80036" points="686,201.9922,696,205.9922,686,209.9922,690,205.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="613" x2="692" y1="205.9922" y2="205.9922"/><polygon fill="#A80036" points="847,231.125,857,235.125,847,239.125,851,235.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="698" x2="853" y1="235.125" y2="235.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="705" y="230.0591">enqueue to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="782" y="230.0591">queueB1</text><polygon fill="#A80036" points="709,260.2578,699,264.2578,709,268.2578,705,264.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="863" y1="264.2578" y2="264.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="715" y="259.1919">message id</text><polygon fill="#A80036" points="624,274.2578,614,278.2578,624,282.2578,620,278.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="618" x2="697" y1="278.2578" y2="278.2578"/><polygon fill="#A80036" points="50.5,303.3906,40.5,307.3906,50.5,311.3906,46.5,307.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44.5" x2="612" y1="307.3906" y2="307.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="56.5" y="302.3247">message id</text><path d="M56,329.3906 L202,329.3906 L202,336.3906 L192,346.3906 L56,346.3906 L56,329.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="219.9297" style="stroke: #000000; stroke-width: 2.0;" width="1007" x="56" y="329.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="71" y="342.4575">in transaction</text><polygon fill="#A80036" points="974.5,363.6563,984.5,367.6563,974.5,371.6563,978.5,367.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="864" x2="980.5" y1="367.6563" y2="367.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="871" y="362.5903">dequeue B1</text><polygon fill="#A80036" points="709,392.7891,699,396.7891,709,400.7891,705,396.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="985.5" y1="396.7891" y2="396.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="715" y="391.7231">call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="740" y="391.7231">casual/example/echo</text><polygon fill="#A80036" points="624,406.7891,614,410.7891,624,414.7891,620,410.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="618" x2="697" y1="410.7891" y2="410.7891"/><polygon fill="#A80036" points="119.5,435.9219,109.5,439.9219,119.5,443.9219,115.5,439.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113.5" x2="612" y1="439.9219" y2="439.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="125.5" y="434.856">call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="150.5" y="434.856">casual/example/echo</text><polygon fill="#A80036" points="601,465.0547,611,469.0547,601,473.0547,605,469.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103.5" x2="607" y1="469.0547" y2="469.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="110.5" y="463.9888">reply</text><polygon fill="#A80036" points="686,479.0547,696,483.0547,686,487.0547,690,483.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="613" x2="692" y1="483.0547" y2="483.0547"/><polygon fill="#A80036" points="974.5,508.1875,984.5,512.1875,974.5,516.1875,978.5,512.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="698" x2="980.5" y1="512.1875" y2="512.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="705" y="507.1216">echo reply</text><polygon fill="#A80036" points="875,537.3203,865,541.3203,875,545.3203,871,541.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="869" x2="990.5" y1="541.3203" y2="541.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="881" y="536.2544">enqueue B2</text><path d="M398,563.3203 L544,563.3203 L544,570.3203 L534,580.3203 L398,580.3203 L398,563.3203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="175.6641" style="stroke: #000000; stroke-width: 2.0;" width="794" x="398" y="563.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="413" y="576.3872">in transaction</text><polygon fill="#A80036" points="1105.5,597.5859,1115.5,601.5859,1105.5,605.5859,1109.5,601.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="864" x2="1111.5" y1="601.5859" y2="601.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="871" y="596.52">dequeue B2</text><polygon fill="#A80036" points="709,626.7188,699,630.7188,709,634.7188,705,630.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="1116.5" y1="630.7188" y2="630.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="715" y="625.6528">enqueue</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="775" y="625.6528">queueA1</text><polygon fill="#A80036" points="624,640.7188,614,644.7188,624,648.7188,620,644.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="618" x2="697" y1="644.7188" y2="644.7188"/><polygon fill="#A80036" points="480,669.8516,470,673.8516,480,677.8516,476,673.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="474" x2="612" y1="673.8516" y2="673.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="486" y="668.7856">enqueue</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="546" y="668.7856">queueA1</text><polygon fill="#A80036" points="601,683.8516,611,687.8516,601,691.8516,605,687.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="607" y1="687.8516" y2="687.8516"/><polygon fill="#A80036" points="686,697.8516,696,701.8516,686,705.8516,690,701.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="613" x2="692" y1="701.8516" y2="701.8516"/><polygon fill="#A80036" points="1110.5,726.9844,1120.5,730.9844,1110.5,734.9844,1114.5,730.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="698" x2="1116.5" y1="730.9844" y2="730.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="705" y="725.9185">message id</text><path d="M56,752.9844 L202,752.9844 L202,759.9844 L192,769.9844 L56,769.9844 L56,752.9844 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="144.7969" style="stroke: #000000; stroke-width: 2.0;" width="519.5" x="56" y="752.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="71" y="766.0513">in transaction</text><polygon fill="#A80036" points="352.5,787.25,342.5,791.25,352.5,795.25,348.5,791.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="463" y1="791.25" y2="791.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="358.5" y="786.1841">dequeue A1</text><polygon fill="#A80036" points="119.5,816.3828,109.5,820.3828,119.5,824.3828,115.5,820.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113.5" x2="330.5" y1="820.3828" y2="820.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="125.5" y="815.3169">call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="150.5" y="815.3169">casual/example/rollback</text><polygon fill="#A80036" points="324.5,865.6484,334.5,869.6484,324.5,873.6484,328.5,869.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103.5" x2="330.5" y1="869.6484" y2="869.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="110.5" y="864.5825">reply</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="145.5" y="864.5825">TPFAIL</text><path d="M346,833.3828 L346,888.3828 L556,888.3828 L556,843.3828 L546,833.3828 L346,833.3828 " fill="#FBFB77" filter="url(#f798ozgas93g7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M546,833.3828 L546,843.3828 L556,843.3828 L546,833.3828 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="352" y="850.4497">This will rollback the dequeue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="352" y="865.5825">and move the message to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="352" y="880.7153">queueA1.error</text><!--
@startuml
title casual medium multiple domain example

box "domainA" #LightBlue
   actor "You" as AA
   participant "Server A" as SA
   participant "service-forward" as SFA
   participant "casual-queue" as QA
   participant "gateway" as GA
end box

box "domainB"
   participant "gateway" as GB 
   participant "casual-queue" as QB
   participant "service-forward" as SFB
   participant "queue-forward" as QFB
end box

activate AA

group #eeeeee in transaction 
AA -> GA: enqueue to **queueB1**
GA -> GB:
GB -> QB: enqueue to **queueB1**
activate QB
QB -> GB: message id
deactivate QB
GB -> GA:
GA -> AA: message id
deactivate AA
end

group #eeeeee in transaction
QB -> SFB: dequeue B1
activate SFB
SFB -> GB: call **casual/example/echo**
GB -> GA:
GA -> SA: call **casual/example/echo**
activate SA
SA -> GA: reply 
deactivate SA
GA -> GB
GB -> SFB: echo reply
SFB -> QB: enqueue B2
deactivate SFB
end

group #eeeeee in transaction
QB -> QFB: dequeue B2
activate QFB
QFB -> GB: enqueue **queueA1**
GB -> GA
GA -> QA: enqueue **queueA1**
activate QA
QA -> GA
deactivate QA
GA -> GB
GB -> QFB: message id

deactivate QFB
end

group #eeeeee in transaction

QA -> SFA: dequeue A1
activate SFA
SFA -> SA: call **casual/example/rollback**
activate SA
SA -> SFA: reply **TPFAIL**
note right 
   This will rollback the dequeue 
   and move the message to 
   queueA1.error
end note

deactivate SA

deactivate SFA

end
@enduml

PlantUML version 1.2018.03(Thu Apr 05 16:59:15 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>