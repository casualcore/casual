<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1018px" preserveAspectRatio="none" style="width:1023px;height:1018px;background:#FFFFFF;" version="1.1" viewBox="0 0 1023 1018" width="1023px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tancehjbsv16" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="359" x="330" y="29.4023">casual medium multiple domain example</text><rect fill="#ADD8E6" height="971.4297" style="stroke:#A80036;stroke-width:1.0;" width="644.5" x="16" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65" x="305.75" y="53.7676">domain A</text><rect fill="#DDDDDD" height="971.4297" style="stroke:#A80036;stroke-width:1.0;" width="340.5" x="662.5" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="63" x="801.25" y="53.7676">domain B</text><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="161.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="31.5" y="153.998"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="88.5" y="683.9668"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="78.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="193.5" y="801.8984"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="417.5" y="448.793"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="49.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="417.5" y="831.209"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="821.5" y="242.9297"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="174.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932.5" y="376.1719"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="129.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932.5" y="611.3457"/><rect fill="#EEEEEE" filter="url(#f1tancehjbsv16)" height="162.5527" style="stroke:#000000;stroke-width:2.0;" width="857" x="10" y="160.998"/><rect fill="#EEEEEE" filter="url(#f1tancehjbsv16)" height="221.1738" style="stroke:#000000;stroke-width:2.0;" width="660" x="349" y="337.5508"/><rect fill="#EEEEEE" filter="url(#f1tancehjbsv16)" height="176.5527" style="stroke:#000000;stroke-width:2.0;" width="956" x="53" y="572.7246"/><rect fill="#EEEEEE" filter="url(#f1tancehjbsv16)" height="145.8633" style="stroke:#000000;stroke-width:2.0;" width="612.5" x="53" y="763.2773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="93" x2="93" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="198" x2="198" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="422" x2="422" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="619.5" x2="619.5" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="703.5" x2="703.5" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="826" x2="826" y1="143.998" y2="926.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="937" x2="937" y1="143.998" y2="926.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="20" y="141.0449">You</text><ellipse cx="36.5" cy="70.5098" fill="#FEFECE" filter="url(#f1tancehjbsv16)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M36.5,78.5098 L36.5,105.5098 M23.5,86.5098 L49.5,86.5098 M36.5,105.5098 L23.5,120.5098 M36.5,105.5098 L49.5,120.5098 " fill="none" filter="url(#f1tancehjbsv16)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="20" y="938.6758">You</text><ellipse cx="36.5" cy="951.6289" fill="#FEFECE" filter="url(#f1tancehjbsv16)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M36.5,959.6289 L36.5,986.6289 M23.5,967.6289 L49.5,967.6289 M36.5,986.6289 L23.5,1001.6289 M36.5,986.6289 L49.5,1001.6289 " fill="none" filter="url(#f1tancehjbsv16)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="57" x="63" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="70" y="129.0449">queue</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="57" x="63" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="70" y="945.6758">queue</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="119" x="137" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="144" y="129.0449">queue-forward</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="119" x="137" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="144" y="945.6758">queue-forward</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="123" x="359" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="366" y="129.0449">example-server</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="123" x="359" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="366" y="945.6758">example-server</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="70" x="582.5" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="589.5" y="129.0449">gateway</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="70" x="582.5" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="589.5" y="945.6758">gateway</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="70" x="666.5" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="673.5" y="129.0449">gateway</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="70" x="666.5" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="673.5" y="945.6758">gateway</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="57" x="796" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="803" y="129.0449">queue</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="57" x="796" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="803" y="945.6758">queue</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="119" x="876" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="883" y="129.0449">queue-forward</text><rect fill="#FEFECE" filter="url(#f1tancehjbsv16)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="119" x="876" y="925.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="883" y="945.6758">queue-forward</text><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="161.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="31.5" y="153.998"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="88.5" y="683.9668"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="78.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="193.5" y="801.8984"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="417.5" y="448.793"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="49.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="417.5" y="831.209"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="821.5" y="242.9297"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="174.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932.5" y="376.1719"/><rect fill="#FFFFFF" filter="url(#f1tancehjbsv16)" height="129.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932.5" y="611.3457"/><path d="M10,160.998 L148,160.998 L148,167.998 L138,177.998 L10,177.998 L10,160.998 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="162.5527" style="stroke:#000000;stroke-width:2.0;" width="857" x="10" y="160.998"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93" x="25" y="174.5664">in transaction</text><polygon fill="#A80036" points="607.5,195.6191,617.5,199.6191,607.5,203.6191,611.5,199.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="613.5" y1="199.6191" y2="199.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="48.5" y="194.877">enqueue to b1</text><polygon fill="#A80036" points="691.5,209.6191,701.5,213.6191,691.5,217.6191,695.5,213.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619.5" x2="697.5" y1="213.6191" y2="213.6191"/><polygon fill="#A80036" points="809.5,238.9297,819.5,242.9297,809.5,246.9297,813.5,242.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="703.5" x2="815.5" y1="242.9297" y2="242.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="710.5" y="238.1875">enqueue to b1</text><polygon fill="#A80036" points="714.5,268.2402,704.5,272.2402,714.5,276.2402,710.5,272.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="708.5" x2="825.5" y1="272.2402" y2="272.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="720.5" y="267.498">message id</text><polygon fill="#A80036" points="630.5,282.2402,620.5,286.2402,630.5,290.2402,626.5,286.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="624.5" x2="702.5" y1="286.2402" y2="286.2402"/><polygon fill="#A80036" points="47.5,311.5508,37.5,315.5508,47.5,319.5508,43.5,315.5508" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="618.5" y1="315.5508" y2="315.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="53.5" y="310.8086">message id</text><path d="M349,337.5508 L487,337.5508 L487,344.5508 L477,354.5508 L349,354.5508 L349,337.5508 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="221.1738" style="stroke:#000000;stroke-width:2.0;" width="660" x="349" y="337.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93" x="364" y="351.1191">in transaction</text><polygon fill="#A80036" points="920.5,372.1719,930.5,376.1719,920.5,380.1719,924.5,376.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="826.5" x2="926.5" y1="376.1719" y2="376.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="833.5" y="371.4297">dequeue b1</text><polygon fill="#A80036" points="714.5,401.4824,704.5,405.4824,714.5,409.4824,710.5,405.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="708.5" x2="931.5" y1="405.4824" y2="405.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="720.5" y="400.7402">call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="147" x="746.5" y="400.7402">casual/example/echo</text><polygon fill="#A80036" points="630.5,415.4824,620.5,419.4824,630.5,423.4824,626.5,419.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="624.5" x2="702.5" y1="419.4824" y2="419.4824"/><polygon fill="#A80036" points="438.5,444.793,428.5,448.793,438.5,452.793,434.5,448.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="432.5" x2="618.5" y1="448.793" y2="448.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="444.5" y="444.0508">call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="147" x="470.5" y="444.0508">casual/example/echo</text><polygon fill="#A80036" points="607.5,474.1035,617.5,478.1035,607.5,482.1035,611.5,478.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="422.5" x2="613.5" y1="478.1035" y2="478.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="429.5" y="473.3613">reply</text><polygon fill="#A80036" points="691.5,488.1035,701.5,492.1035,691.5,496.1035,695.5,492.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619.5" x2="697.5" y1="492.1035" y2="492.1035"/><polygon fill="#A80036" points="920.5,517.4141,930.5,521.4141,920.5,525.4141,924.5,521.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="703.5" x2="926.5" y1="521.4141" y2="521.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="710.5" y="516.6719">echo reply</text><polygon fill="#A80036" points="837.5,546.7246,827.5,550.7246,837.5,554.7246,833.5,550.7246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="831.5" x2="936.5" y1="550.7246" y2="550.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="843.5" y="545.9824">enqueue b2</text><path d="M53,572.7246 L191,572.7246 L191,579.7246 L181,589.7246 L53,589.7246 L53,572.7246 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="176.5527" style="stroke:#000000;stroke-width:2.0;" width="956" x="53" y="572.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93" x="68" y="586.293">in transaction</text><polygon fill="#A80036" points="920.5,607.3457,930.5,611.3457,920.5,615.3457,924.5,611.3457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="826.5" x2="926.5" y1="611.3457" y2="611.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="833.5" y="606.6035">dequeue b2</text><polygon fill="#A80036" points="714.5,636.6563,704.5,640.6563,714.5,644.6563,710.5,640.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="708.5" x2="931.5" y1="640.6563" y2="640.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="720.5" y="635.9141">enqueue a1</text><polygon fill="#A80036" points="630.5,650.6563,620.5,654.6563,630.5,658.6563,626.5,654.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="624.5" x2="702.5" y1="654.6563" y2="654.6563"/><polygon fill="#A80036" points="109.5,679.9668,99.5,683.9668,109.5,687.9668,105.5,683.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="103.5" x2="618.5" y1="683.9668" y2="683.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="115.5" y="679.2246">enqueue a1</text><polygon fill="#A80036" points="607.5,693.9668,617.5,697.9668,607.5,701.9668,611.5,697.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="613.5" y1="697.9668" y2="697.9668"/><polygon fill="#A80036" points="691.5,707.9668,701.5,711.9668,691.5,715.9668,695.5,711.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619.5" x2="697.5" y1="711.9668" y2="711.9668"/><polygon fill="#A80036" points="925.5,737.2773,935.5,741.2773,925.5,745.2773,929.5,741.2773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="703.5" x2="931.5" y1="741.2773" y2="741.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="710.5" y="736.5352">message id</text><path d="M53,763.2773 L191,763.2773 L191,770.2773 L181,780.2773 L53,780.2773 L53,763.2773 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="145.8633" style="stroke:#000000;stroke-width:2.0;" width="612.5" x="53" y="763.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93" x="68" y="776.8457">in transaction</text><polygon fill="#A80036" points="181.5,797.8984,191.5,801.8984,181.5,805.8984,185.5,801.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="187.5" y1="801.8984" y2="801.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="100.5" y="797.1563">dequeue a1</text><polygon fill="#A80036" points="405.5,827.209,415.5,831.209,405.5,835.209,409.5,831.209" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="411.5" y1="831.209" y2="831.209"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="210.5" y="826.4668">call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169" x="236.5" y="826.4668">casual/example/rollback</text><polygon fill="#A80036" points="209.5,876.8301,199.5,880.8301,209.5,884.8301,205.5,880.8301" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="421.5" y1="880.8301" y2="880.8301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="215.5" y="876.0879">reply</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="46" x="250.5" y="876.0879">TPFAIL</text><path d="M432,844.209 L432,899.209 L646,899.209 L646,854.209 L636,844.209 L432,844.209 " fill="#FBFB77" filter="url(#f1tancehjbsv16)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M636,844.209 L636,854.209 L646,854.209 L636,844.209 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="438" y="861.7773">This will rollback the dequeue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="438" y="877.0879">and move the message to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="438" y="892.3984">a1.error</text><!--MD5=[33264aa6b6f5d7ff7a2fb17113fd0b13]
@startuml scenario

title casual medium multiple domain example

box "domain A" #LightBlue
   actor "You" as AA
   participant "queue" as QA
   participant "queue-forward" as QFA
   participant "example-server" as SA
   participant "gateway" as GA
end box

box "domain B"
   participant "gateway" as GB 
   participant "queue" as QB
   participant "queue-forward" as QFB
end box

activate AA

group #eeeeee in transaction 
AA -> GA: **enqueue to b1**
GA -> GB:
GB -> QB: **enqueue to b1**
activate QB
QB -> GB: message id
deactivate QB
GB -> GA:
GA -> AA: message id
deactivate AA
end

group #eeeeee in transaction
QB -> QFB: **dequeue b1**
activate QFB
QFB -> GB: call **casual/example/echo**
GB -> GA:
GA -> SA: call **casual/example/echo**
activate SA
SA -> GA: reply 
deactivate SA
GA -> GB
GB -> QFB: echo reply
QFB -> QB: **enqueue b2**
deactivate QFB
end

group #eeeeee in transaction
QB -> QFB: **dequeue b2**
activate QFB
QFB -> GB: **enqueue a1**
GB -> GA
GA -> QA: **enqueue a1**
activate QA
QA -> GA
deactivate QA
GA -> GB
GB -> QFB: message id

deactivate QFB
end

group #eeeeee in transaction

QA -> QFA: **dequeue a1**
activate QFA
QFA -> SA: call **casual/example/rollback**
activate SA
SA -> QFA: reply **TPFAIL**
note right 
   This will rollback the dequeue 
   and move the message to 
   a1.error
end note

deactivate SA

deactivate QFA

end



@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>