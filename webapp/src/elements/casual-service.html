<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="casual-service">
  <template>
    <style>

    	#content{
            height: 60px;
    		width: 100%;
    		overflow: hidden; 
            border-bottom: 1px solid #d0d0d0;
    	}

        #service-content{
            width: 100%;
            height: 100%;
        }

        #service-content ul{
            list-style: none;
            margin: 0;
            padding: 0;
        }
        #service-content:hover{
            background-color: #ECEFF1;
        }

        #service-info{
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-between;
        }

        #service-type{
            width: 30px;
            height: 100%;
            background-color: #3f51b5; 
            color: #fff;
            vertical-align: middle;
            text-align: center;
            line-height: 60px;
        }

        #service-info-content{
            width: calc(100% - 35px);
            height: 100%;
            padding-left: 5px;
        }

        #service-name{
            font-size: 1.2em;
            font-weight: bold;
        }

        #service-instances-text:hover{
            cursor: pointer;
            text-decoration: underline;
        }

        #service-instances-field{
            color: grey;
            font-size: 0.8em;
            vertical-align: middle;
        }

    </style>

    <div id="content">
    	<div id="service-content">
            <div id="service-info">
                <div id="service-type">{{servicedata.type}}</div>
                <div id="service-info-content">
                    <ul>
                        <li>
                            <span id="service-name">{{servicedata.name}}</span>
                        </li>

                        <li>
                            <span id="service-instances-text" on-tap="toggleInstances">Instances:</span>
                            <span id="service-instances-counter"> {{servicedata.instances.local.length}}</span>
                            <template is="dom-if" if="{{servicedata.instances.length}}">
                                <span id="service-instances-field">
                                    <template is="dom-if" if="{{showinstances}}">[ - ]</template>
                                    <template is="dom-if" if="{{!showinstances}}">[ + ]</template>
                                </span>
                            </template>
                        </li>
                        <template is="dom-if" if="{{showinstances}}">
                            <template is="dom-if" if="{{servicedata.instances.length}}">
                                <li>{{servicedata.instances}}</li>
                            </template>
                        </template>
                    </ul>
                </div>
            </div>
        </div>
    </div>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'casual-service',

        properties: {
            servicedata: {
                type: Object,
                notify: true,
                value: function(d){
                    return d.servicedata;
                }
            },

            showinstances: {
                type: Boolean,
                notify: true,
                value: false
            }
        },

        toggleInstances: function(){
            this.showinstances = this.showinstances ? false : true;
        }

      });
    })();
  </script>
</dom-module>
